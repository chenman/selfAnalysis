(function(a){a.addFlex=function(v,x){if(v.grid){return false}a(v).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("width");var A={hset:{},rePosDrag:function(){var p=0-this.hDiv.scrollLeft;if(this.hDiv.scrollLeft>0){p-=Math.floor(x.cgwidth/2)}a(A.cDrag).css({top:A.hDiv.offsetTop+1});var g=this.cdpad;a("div",A.cDrag).hide();a("thead tr:first th:visible",this.hDiv).each(function(){if(a(this).css("display")=="none"){return}var H=a("thead tr:first th:visible",A.hDiv).index(this);var G=parseInt(a("div",this).width());var t=G;if(p==0){p-=Math.floor(x.cgwidth/2)}G=G+p+g;a("div:eq("+H+")",A.cDrag).css({left:G+"px"}).show();p=G})},fixHeight:function(p){p=false;if(!p){p=a(A.bDiv).height()}var G=a(this.hDiv).height();a("div",this.cDrag).each(function(){a(this).height(p+G)});var t=parseInt(a(A.nDiv).height());if(t>p){a(A.nDiv).height(p).width(200)}else{a(A.nDiv).height("auto").width("auto")}a(A.block).css({height:p,marginBottom:(p*-1)});var g=A.bDiv.offsetTop+p;if(x.height!="auto"&&x.resizable){g=A.vDiv.offsetTop}a(A.rDiv).css({height:g})},dragStart:function(H,G,t){if(H=="colresize"){a(A.nDiv).hide();a(A.nBtn).hide();var I=a("div",this.cDrag).index(t);var g=a("th:visible div:eq("+I+")",this.hDiv).width();a(t).addClass("dragging").siblings().hide();this.colresize={startX:G.pageX,ol:parseInt(t.style.left),ow:g,n:I};a("body").css("cursor","col-resize")}else{if(H=="vresize"){var p=false;a("body").css("cursor","row-resize");if(t){p=true;a("body").css("cursor","col-resize")}this.vresize={h:x.height,sy:G.pageY,w:x.width,sx:G.pageX,hgo:p}}else{if(H=="colMove"){a(A.nDiv).hide();a(A.nBtn).hide();this.hset=a(this.hDiv).offset();this.hset.right=this.hset.left+a("table",this.hDiv).width();this.hset.bottom=this.hset.top+a("table",this.hDiv).height();this.dcol=t;this.dcoln=a("th",this.hDiv).index(t);this.colCopy=document.createElement("div");this.colCopy.className="colCopy";this.colCopy.innerHTML=t.innerHTML;if(a.browser.msie){this.colCopy.className="colCopy ie"}a(this.colCopy).css({position:"absolute","float":"left",display:"none",textAlign:t.align});a("body").append(this.colCopy);a(this.cDrag).hide()}}}a("body").noSelect()},calScrollBarWidth:function(){var H=document.createElement("p");H.style.width="100%";H.style.height="200px";var I=document.createElement("div");I.style.position="absolute";I.style.top="0px";I.style.left="0px";I.style.visibility="hidden";I.style.width="200px";I.style.height="150px";I.style.overflow="hidden";I.appendChild(H);document.body.appendChild(I);var p=H.offsetWidth;var G=H.offsetHeight;I.style.overflow="scroll";var g=H.offsetWidth;var t=H.offsetHeight;if(p==g){g=I.clientWidth}if(G==t){t=I.clientWidth}document.body.removeChild(I);window.scrollbarWidth=p-g;window.scrollbarHeight=G-t;return{scrollbarWidth:window.scrollbarWidth,scrollbarHeight:window.scrollbarHeight}},calWidth:function(G){var p=a("#"+x.container_id).outerWidth(false)-1;var I=a("#"+x.container_id).width()-1;if(typeof x.width=="string"&&x.width.indexOf("%")!=-1){if(x.showcheckbox){p=p*parseFloat(x.width)*0.01-2-32}else{p=p*parseFloat(x.width)*0.01-2}}else{if(typeof x.width=="string"&&x.width.indexOf("%")==-1){if(x.showcheckbox){p=parseFloat(x.width)-32-2}else{p=parseFloat(x.width)-2}}else{if(x.showcheckbox){p=x.width-32-2}else{p=x.width-2}}}p=p*G.totalColsWidthPercent;var J=a("#"+x.container_id+" .bbit-grid .bDiv");if(J[0].clientWidth<J[0].offsetWidth-4){p=p-A.calScrollBarWidth().scrollbarWidth}a("#"+x.container_id+"_xDiv",J).css("left",a("#"+x.container_id).find(".hDivBox").width()+"px");for(var H=0,K=x.colModel.length;H<K;H++){var L=x.colModel[H];var t;var g=a("#"+x.container_id+" .bbit-grid .hDiv th[axis=col"+H+"]");if(typeof L.width=="string"&&L.width.indexOf("%")!=-1){t=p*(parseFloat(L.width)*0.01/G.nowPerColPercent)-10}else{t=parseFloat(L.width)}g.attr("width",t);g.children("div").css("width",t);a(".bbit-grid .bDiv tr[id^='"+x.table_id+"_row_']").each(function(){a(this).children("td").eq(x.showcheckbox?H+1:H).children("div").css("width",t)});A.rePosDrag()}},calPerColPercent:function(){var t=0;var P=0;var K=0;var L=1;var g=true;var G=a("input.noborder",A.nDiv).filter(function(){return !a(this).attr("checked")});var J=a("input.noborder",A.nDiv).filter(function(){return a(this).attr("checked")});for(var I=0,M=x.colModel.length;I<M;I++){var R=x.colModel[I];var S=R.width;if(R.hide){var O=false;for(var H=0,N=G.length;H<N;H++){var p=a("th[axis='col"+a(G[H]).attr("value")+"']",this.hDiv).children().text();if(p==R.display){O=true;break}}for(var H=0,Q=J.length;H<Q;H++){var p=a("th[axis='col"+a(J[H]).attr("value")+"']",this.hDiv).children().text();if(p==R.display){O=true;break}}if(!O){if(typeof R.width=="string"&&R.width.indexOf("%")!=-1){P+=parseInt(R.width)}}}if(typeof S=="string"&&S.indexOf("%")!=-1){g=true;K+=parseInt(S)}else{g=false}}K=K*0.01;for(var I=0,M=G.length;I<M;I++){var S=a("th[axis='col"+a(G[I]).attr("value")+"']",this.hDiv).attr("oriWidth");if(S.indexOf("%")==-1){g=false;break}else{g=true}t+=parseInt(S)}t=P+t;L=K-t*0.01;return{isPercent:g,nowPerColPercent:L,hideColsWidth:t,totalColsWidthPercent:K}},reSize:function(){a(this.gDiv).width(x.width);if(!x.autoHeight){a(this.bDiv).height(x.height)}var g=A.calPerColPercent();if(g.isPercent){A.calWidth(g)}},dragMove:function(H){if(this.colresize){var p=this.colresize.n;var M=H.pageX-this.colresize.startX;var I=this.colresize.ol+M;var G=this.colresize.ow+M;if(G>x.minwidth){a("div:eq("+p+")",this.cDrag).css("left",I);this.colresize.nw=G}}else{if(this.vresize){var N=this.vresize;var K=H.pageY;var M=K-N.sy;if(!x.defwidth){x.defwidth=x.width}if(x.width!="auto"&&!x.nohresize&&N.hgo){var L=H.pageX;var t=L-N.sx;var g=N.w+t;if(g>x.defwidth){this.gDiv.style.width=g+"px";x.width=g}}var J=N.h+M;if((J>x.minheight||x.height<x.minheight)&&!N.hgo){this.bDiv.style.height=J+"px";x.height=J;this.fixHeight(J)}N=null}}},dragEnd:function(){if(this.colresize){var t=this.colresize.n;var g=this.colresize.nw;a("th:visible div:eq("+t+")",this.hDiv).css("width",g);a("th:visible div:eq("+t+")",this.hDiv).parent("th").css("width",g);a("tr",this.bDiv).each(function(){a("td:visible div[candrag='true']:eq("+t+")",this).css("width",g)});this.hDiv.scrollLeft=this.bDiv.scrollLeft;a("div:eq("+t+")",this.cDrag).siblings().show();a(".dragging",this.cDrag).removeClass("dragging");this.rePosDrag();this.fixHeight();this.colresize=false}else{if(this.vresize){this.vresize=false}else{if(this.colCopy){a(this.colCopy).remove();if(this.dcolt!=null){a(this.cdropleft).remove();a(this.cdropright).remove();this.rePosDrag()}this.dcol=null;this.hset=null;this.dcoln=null;this.dcolt=null;this.colCopy=null;a(".thMove",this.hDiv).removeClass("thMove");a(this.cDrag).show()}}}a("body").css("cursor","default");a("body").noSelect(false);var p=a("#"+x.container_id+" .bbit-grid .bDiv");a("#"+x.container_id+"_xDiv",p).css("left",a("#"+x.container_id).find(".hDivBox").width()+"px")},toggleCol:function(J,H){var G=a("th[axis='col"+J+"']",this.hDiv)[0];var I=a("thead th",A.hDiv).index(G);var g=a("input[value="+J+"]",A.nDiv)[0];var t=a("input[value="+J+"]",A.eDiv)[0];if(H==null){H=G.hide}if(a("input:checked",A.nDiv).length<x.minColToggle&&!H){return false}if(H){G.hide=false;a(G).show();g.checked=true;if(t){t.checked=true}}else{G.hide=true;a(G).hide();g.checked=false;if(t){t.checked=false}}a("tbody tr[id^='"+x.table_id+"_row_']",v).each(function(){var K=a(this).children("td");if(H){a(K[I]).show()}else{a(K[I]).hide()}});var p=A.calPerColPercent();if(p.isPercent){A.calWidth(p)}this.rePosDrag();if(x.onToggleCol){x.onToggleCol(J,H)}return H},switchCol:function(p,g){a("tbody tr",v).each(function(){if(p>g){a("td:eq("+g+")",this).before(a("td:eq("+p+")",this))}else{a("td:eq("+g+")",this).after(a("td:eq("+p+")",this))}});if(p>g){a("tr:eq("+g+")",this.nDiv).before(a("tr:eq("+p+")",this.nDiv))}else{a("tr:eq("+g+")",this.nDiv).after(a("tr:eq("+p+")",this.nDiv))}if(a.browser.msie&&a.browser.version<7){a("tr:eq("+g+") input",this.nDiv)[0].checked=true}this.hDiv.scrollLeft=this.bDiv.scrollLeft},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft;this.rePosDrag()},hideLoading:function(){a(".pReload",this.pDiv).removeClass("loading");if(x.hideOnSubmit){A.doMask("unmask")}if(x.usepager){a(".pPageStat",this.pDiv).html(x.errormsg)}this.loading=false},addData:function(I){if(x.preProcess){I=x.preProcess(I)}a(".pReload",this.pDiv).removeClass("loading");this.loading=false;if(!I){if(x.usepager){a(".pPageStat",this.pDiv).html(x.errormsg)}return false}var t=x.total;if(x.dataType=="xml"){x.total=+a("rows total",I).text()}else{x.total=I.total}if(x.total<0){x.total=t}if(x.total==0){a("tr, a, td, div",v).unbind();a(v).empty();x.pages=1;x.page=1;if(x.usepager){this.buildpager();a(".pPageStat",this.pDiv).html(x.nomsg)}if(x.hideOnSubmit){A.doMask("unmask")}a(A.bDiv).addClass("noData");return false}a(A.bDiv).removeClass("noData");x.pages=Math.ceil(x.total/x.rp);if(x.dataType=="xml"){x.page=+a("rows page",I).text()}else{x.page=I.page}if(x.usepager){this.buildpager()}var p=a("thead tr:first th",A.hDiv);var J=a("thead tr:first th div",A.hDiv);var H=[];var G=I.oriDateValue;H.push("<tbody>");if(x.dataType=="json"){if(I.rows!=null){a.each(I.rows,function(K,N){H.push("<tr id='",x.table_id+"_row_",N.id,"'");if(K%2&&x.striped){H.push(" class='erow'")}if(G&&G.length>0){H.push(" value_type='"+G[K].type+"' date_value="+G[K].value+" ")}if(x.rowbinddata){var L="";for(var K=0;K<N.cell.length;K++){if(typeof(N.cell[K])=="string"){L=L+N.cell[K].replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replaceAll('"',"&quot;")}else{L=L+N.cell[K]}if(K<N.cell.length-1){L=L+"_FG$SP_"}}H.push('chd="'+L+'"')}H.push(">");var M=N.id;a(p).each(function(P){var U="";var S="";H.push("<td align='",this.align,"'");var O=a(this).attr("axis").substr(3);if(x.sortname&&x.sortname==a(this).attr("abbr")){S="sorted"}if(this.hide){H.push(" style='display:none;'")}var R=J[P].style.width;var V=[];var T=N.cell[O]||"";if(O!="-1"){if(this.format){T=this.format(T,M)}if(x.colModel[O].ct&&x.colModel[O].ct.type=="date"){T=A.parseData({data:T,colModel:x.colModel[O]})}}if(typeof T=="string"&&x.isFilter){T=T.replace(/\</g,"&lt;").replace(/\</g,"&lt;").replaceAll('"',"&quot;")}var Q=null;if(typeof T=="string"){Q=T.replace(/\</g,"&lt;").replace(/\</g,"&lt;").replaceAll('"',"&quot;")}else{Q=T}V.push("<div candrag='true' title=\""+Q+"\" style='text-align:",this.align,";width:"+R,";");if(x.nowrap==false){V.push("white-space:normal;word-break:break-all;")}if(x.showcheckbox){V.push(" padding:2px 4px 0px 4px;'>")}else{V.push(" padding:4px 4px 2px 4px;'>")}if(O=="-1"){if(x.disCheckbox){V.push("<input type='checkbox' id='chk_",N.id,"' class='itemchk' value='",N.id,"' disabled='disabled'/>")}else{V.push("<input type='checkbox' id='chk_",N.id,"' class='itemchk' value='",N.id,"'/>")}if(S!=""){S+=" chboxtd"}else{S+="chboxtd"}}else{V.push(T)}V.push("</div>");if(S!=""){H.push(" class='",S,"'")}H.push(">",V.join(""),"</td>")});H.push("</tr>")})}}else{if(x.dataType=="xml"){i=1;a("rows row",I).each(function(){i++;var L=this;var K=new Array();a("cell",L).each(function(){K.push(a(this).text())});var N=a(this).attr("id");H.push("<tr id='","row",N,"'");if(i%2&&x.striped){H.push(" class='erow'")}if(x.rowbinddata){H.push("chd='",K.join("_FG$SP_"),"'")}H.push(">");var M=N;a(p).each(function(P){H.push("<td align='",this.align,"'");if(this.hide){H.push(" style='display:none;'")}var R="";var T="";var O=a(this).attr("axis").substr(3);if(x.sortname&&x.sortname==a(this).attr("abbr")){R="sorted"}var Q=J[P].style.width;var U=[];U.push("<div style='text-align:",this.align,";width:",Q,";");if(x.nowrap==false){U.push("white-space:normal")}U.push("'>");if(O=="-1"){U.push("<input type='checkbox' id='chk_",N,"' class='itemchk' value='",N,"'/>");if(R!=""){R+=" chboxtd"}else{R+="chboxtd"}}else{var S=K[O]||"&nbsp;";if(x.rowbinddata){T=K[O]||""}if(this.format){S=this.format(S,M)}U.push(S)}U.push("</div>");if(R!=""){H.push(" class='",R,"'")}H.push(" axis='",T,"'",">",U.join(""),"</td>")});H.push("</tr>")})}}H.push("</tbody>");a(v).html(H.join(""));this.rePosDrag();this.addRowProp();this.applyEvent();if(x.onSuccess){x.onSuccess(this)}if(x.hideOnSubmit){A.doMask("unmask")}this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(a.browser.opera){a(v).css("visibility","visible")}if(x.autoHeight){A.calContentHeight()}var g=A.calPerColPercent();if(g.isPercent){A.calWidth(g)}},clearAllRows:function(){a(v).html("");if(x.showcheckbox){a("input:first",A.hDiv).removeAttr("checked")}A.doUsePager();x.isSuccessSearch=false;A.freshSortClass();if(x.autoHeight){A.calContentHeight()}},calContentHeight:function(t){var g=0;var G=a("#"+x.container_id+"_table_id",A.bDiv);var p=a("#"+x.container_id+" .bbit-grid .bDiv");if(p[0].clientHeight<p[0].offsetHeight-4){g=G.height()+1+A.calScrollBarWidth().scrollbarHeight;a("#"+x.container_id+"_xDiv",p).css("left",a("#"+x.container_id).find(".hDivBox").width()+"px")}else{g=G.height()+1}if(a(A.bDiv).attr("ori_height")=="auto"){a(A.bDiv).height(g)}else{if(a(A.bDiv).height()<(g)){a(A.bDiv).height(g)}else{if(a(A.bDiv).attr("ori_height")<(g)){a(A.bDiv).height(g)}else{a(A.bDiv).css("height",a(A.bDiv).attr("ori_height")+"px")}}}A.reSize()},addCss:function(t){var g;if(t.str){var p=t.id.indexOf("#");if(p>-1){t.id=t.id.substr(p+1,t.id.length)}if(a("#grid_customBg_"+t.id).length>0){return}g=document.createElement("style");g.setAttribute("type","text/css");g.setAttribute("id","grid_customBg_"+t.id);if(g.styleSheet){document.getElementsByTagName("head")[0].appendChild(g);g.styleSheet.cssText=t.str}else{g.appendChild(document.createTextNode(t.str));document.getElementsByTagName("head")[0].appendChild(g)}}if(t.url){if(document.createStyleSheet){try{g=document.createStyleSheet(t.url)}catch(G){}}else{g=document.createElement("link");g.rel="stylesheet";g.type="text/css";g.media="all";g.href=t.url;document.getElementsByTagName("head")[0].appendChild(g)}}},reverseRowOrColumnCol:{setCol:{isCall:false,param:new Array(),bgColor:new Array()},clearCol:{isCall:false,param:new Array()},_index:0},setRowOrColumnCol:function(I){var g=[];var P=true;var U=a("tbody tr[id^='"+x.table_id+"_row_']",A.bDiv);if(I){if(I.bgColor){var H=I.bgColor.indexOf("#")==-1?I.bgColor:I.bgColor.substr(1);var M=".bbit-grid tr td.customBgCol"+H+"{background-color: "+I.bgColor+";}.bbit-grid tr.erow td.customBgCol"+H+"{background-color: "+I.bgColor+";}.bbit-grid tr.newadd_tr td.customBgCol"+H+"{background-color: "+I.bgColor+";}";for(var Q=0;Q<A.reverseRowOrColumnCol.setCol.bgColor.length;Q++){var N="grid_customBg_"+A.reverseRowOrColumnCol.setCol.bgColor[Q];if(a("#"+N).length>=1&&A.reverseRowOrColumnCol.setCol.bgColor[Q]==I.bgColor){P=false}else{P=true}}}if(I.rowNum&&I.colNum){var S=I.colNum;if(x.showcheckbox){S="";g=I.colNum.split(",");for(var Q=0;Q<g.length;Q++){if(!isNaN(parseInt(g[Q]))){S+=(parseInt(g[Q])+1)+","}}var R=S.lastIndexOf(",");S=S.substr(0,R)}var t=I.rowNum.split(",");var J=S.split(",");if(I.bgColor&&P){A.addCss({str:M,id:I.bgColor})}for(var Q=0;Q<t.length;Q++){if(!isNaN(parseInt(t[Q]))){var X=U.eq(parseInt(t[Q])-1);var W=X.children("td");for(var O=0;O<J.length;O++){if(!isNaN(parseInt(J[O]))){if(I.color){a(W[parseInt(J[O])]).css("color",I.color)}if(I.bgColor){if(P){for(var T=0;T<A.reverseRowOrColumnCol.setCol.bgColor.length;T++){var K=A.reverseRowOrColumnCol.setCol.bgColor[T];if(K.indexOf("#")==-1){if(a(W[parseInt(J[O])]).hasClass("customBgCol"+K)){a(W[parseInt(J[O])]).removeClass("customBgCol"+K)}}else{if(a(W[parseInt(J[O])]).hasClass("customBgCol"+K.substr(1))){a(W[parseInt(J[O])]).removeClass("customBgCol"+K.substr(1))}}}}a(W[parseInt(J[O])]).addClass("customBgCol");a(W[parseInt(J[O])]).addClass("customBgCol"+H)}}else{alert("\u8bf7\u4f20\u5165\u7531\u6570\u5b57\u7ec4\u6210\u7684\u5217\u53c2\u6570\uff01\uff01");return false}}}else{alert("\u8bf7\u4f20\u5165\u7531\u6570\u5b57\u7ec4\u6210\u7684\u884c\u53c2\u6570!!");return false}}}else{if(I.rowNum){var g=I.rowNum.split(",");for(var Q=0;Q<g.length;Q++){if(!isNaN(parseInt(g[Q]))){continue}else{alert("rowNum\u53c2\u6570\u542b\u6709\u9664\u9017\u53f7\u4e4b\u5916\u7684\u5176\u4ed6\u975e\u6570\u5b57\u5b57\u7b26\uff01\uff01");return false}}if(I.bgColor&&P){A.addCss({str:M,id:I.bgColor})}for(var Q=0;Q<g.length;Q++){var L=U.eq(g[Q]-1);var W=L.children("td");for(var O=0;O<W.length;O++){if(I.color){a(W[parseInt(x.showcheckbox?O+1:O)]).css("color",I.color)}if(I.bgColor){if(P){for(var T=0;T<A.reverseRowOrColumnCol.setCol.bgColor.length-1;T++){var K=A.reverseRowOrColumnCol.setCol.bgColor[T];if(K.indexOf("#")==-1){if(a(W[parseInt(x.showcheckbox?O+1:O)]).hasClass("customBgCol"+K)){a(W[parseInt(x.showcheckbox?O+1:O)]).removeClass("customBgCol"+K)}}else{if(a(W[parseInt(x.showcheckbox?O+1:O)]).hasClass("customBgCol"+K.substr(1))){a(W[parseInt(x.showcheckbox?O+1:O)]).removeClass("customBgCol"+K.substr(1))}}}}a(W[parseInt(x.showcheckbox?O+1:O)]).addClass("customBgCol");a(W[parseInt(x.showcheckbox?O+1:O)]).addClass("customBgCol"+H)}}}}if(I.colNum){var S=I.colNum;if(x.showcheckbox){S="";g=I.colNum.split(",");for(var Q=0;Q<g.length;Q++){if(!isNaN(parseInt(g[Q]))){S+=(parseInt(g[Q])+1)+","}else{alert("colNum\u53c2\u6570\u542b\u6709\u9664\u9017\u53f7\u4e4b\u5916\u7684\u5176\u4ed6\u975e\u6570\u5b57\u5b57\u7b26\uff01\uff01");return false}}var R=S.lastIndexOf(",");S=S.substr(0,R)}else{g=S.split(",");for(var Q=0;Q<g.length;Q++){if(!isNaN(parseInt(g[Q]))){continue}else{alert("colNum\u53c2\u6570\u542b\u6709\u9664\u9017\u53f7\u4e4b\u5916\u7684\u5176\u4ed6\u975e\u6570\u5b57\u5b57\u7b26\uff01\uff01");return false}}}if(g.length){g=S.split(",")}if(I.bgColor&&P){A.addCss({str:M,id:I.bgColor})}for(var Q=0;Q<U.length;Q++){var X=U.eq(parseInt(Q-1));var W=X.children("td");for(var O=0;O<g.length;O++){if(I.color){a(W[parseInt(g[O]-1)]).css("color",I.color)}if(I.bgColor){if(P){for(var T=0;T<A.reverseRowOrColumnCol.setCol.bgColor.length-1;T++){var K=A.reverseRowOrColumnCol.setCol.bgColor[T];if(K.indexOf("#")==-1){if(a(W[parseInt(g[O]-1)]).hasClass("customBgCol"+K)){a(W[parseInt(g[O]-1)]).removeClass("customBgCol"+K)}}else{if(a(W[parseInt(g[O]-1)]).hasClass("customBgCol"+K.substr(1))){a(W[parseInt(g[O]-1)]).removeClass("customBgCol"+K.substr(1))}}}}a(W[parseInt(g[O]-1)]).addClass("customBgCol");a(W[parseInt(g[O]-1)]).addClass("customBgCol"+H)}}}}}if(I.bgColor&&P){A.reverseRowOrColumnCol._index++}if(I.isReloadCall==undefined){var V=false;var p=(I.rowNum?I.rowNum:"")+(I.colNum?I.colNum:"")+(I.bgColor?I.bgColor:"");for(var Q=0;Q<A.reverseRowOrColumnCol.setCol.param.length;Q++){var G=A.reverseRowOrColumnCol.setCol.param[Q].paramStr;if(G==p){V=false;break}else{V=true}}if(!A.reverseRowOrColumnCol.setCol.param.length||V){A.reverseRowOrColumnCol.setCol.param.push(I);A.reverseRowOrColumnCol.setCol.bgColor.push(I.bgColor);A.reverseRowOrColumnCol.setCol.param[A.reverseRowOrColumnCol.setCol.param.length-1].paramStr=p}A.reverseRowOrColumnCol.setCol.isCall=true}}},clearRowOrColumnCol:function(t){var K=[];if(t){if(t.rowNum&&t.colNum){var I=t.colNum;if(x.showcheckbox){I="";K=t.colNum.split(",");for(var J=0;J<K.length;J++){if(!isNaN(parseInt(K[J]))){I+=(parseInt(K[J])+1)+","}}var M=I.lastIndexOf(",");I=I.substr(0,M)}var p=a("tbody tr[id^='"+x.table_id+"_row_']",A.bDiv);var P=t.rowNum.split(",");var N=I.split(",");for(var J=0;J<P.length;J++){if(!isNaN(parseInt(P[J]))){var L=p.eq(parseInt(P[J])-1);var O=L.children("td");for(var H=0;H<N.length;H++){if(!isNaN(parseInt(N[H]))){if(t.color){a(O[parseInt(N[H]-1)]).css("color","")}if(t.bgColor){for(var Q=0;Q<A.reverseRowOrColumnCol.setCol.bgColor.length;Q++){var g=A.reverseRowOrColumnCol.setCol.bgColor[Q];if(g&&g.indexOf("#")==-1){if(a(O[parseInt(N[H]-1)]).hasClass("customBgCol"+g)){a(O[parseInt(N[H]-1)]).removeClass("customBgCol"+g)}}else{if(a(O[parseInt(N[H]-1)]).hasClass("customBgCol"+g.substr(1))){a(O[parseInt(N[H]-1)]).removeClass("customBgCol"+g.substr(1))}}}a(O[parseInt(N[H]-1)]).removeClass("customBgCol")}}else{alert("\u8bf7\u4f20\u5165\u7531\u6570\u5b57\u7ec4\u6210\u7684\u5217\u53c2\u6570\uff01\uff01");return false}}}else{alert("\u8bf7\u4f20\u5165\u7531\u6570\u5b57\u7ec4\u6210\u7684\u884c\u53c2\u6570!!");return false}}}else{if(t.rowNum){var K=t.rowNum.split(",");for(var J=0;J<K.length;J++){if(!isNaN(parseInt(K[J]))){continue}else{alert("rowNum\u53c2\u6570\u542b\u6709\u9664\u9017\u53f7\u4e4b\u5916\u7684\u5176\u4ed6\u975e\u6570\u5b57\u5b57\u7b26\uff01\uff01");return false}}var p=a("tbody tr[id^='"+x.table_id+"_row_']",A.bDiv);for(var J=0;J<K.length;J++){var G=p.eq(K[J]-1);var O=G.children("td");for(var H=0;H<O.length;H++){if(t.color){a(O[parseInt(x.showcheckbox?H+1:H)]).css("color","")}if(t.bgColor){for(var Q=0;Q<A.reverseRowOrColumnCol.setCol.bgColor.length;Q++){var g=A.reverseRowOrColumnCol.setCol.bgColor[Q];if(g.indexOf("#")==-1){if(a(O[parseInt(x.showcheckbox?H+1:H)]).hasClass("customBgCol"+g)){a(O[parseInt(x.showcheckbox?H+1:H)]).removeClass("customBgCol"+g)}}else{if(a(O[parseInt(x.showcheckbox?H+1:H)]).hasClass("customBgCol"+g.substr(1))){a(O[parseInt(x.showcheckbox?H+1:H)]).removeClass("customBgCol"+g.substr(1))}}}a(O[parseInt(x.showcheckbox?H+1:H)]).removeClass("customBgCol")}}}}if(t.colNum){var I=t.colNum;if(x.showcheckbox){I="";K=t.colNum.split(",");for(var J=0;J<K.length;J++){if(!isNaN(parseInt(K[J]))){I+=(parseInt(K[J])+1)+","}else{alert("colNum\u53c2\u6570\u542b\u6709\u9664\u9017\u53f7\u4e4b\u5916\u7684\u5176\u4ed6\u975e\u6570\u5b57\u5b57\u7b26\uff01\uff01");return false}}var M=I.lastIndexOf(",");I=I.substr(0,M)}else{K=I.split(",");for(var J=0;J<K.length;J++){if(!isNaN(parseInt(I[J]))){continue}else{alert("colNum\u53c2\u6570\u542b\u6709\u9664\u9017\u53f7\u4e4b\u5916\u7684\u5176\u4ed6\u975e\u6570\u5b57\u5b57\u7b26\uff01\uff01");return false}}}if(K.length){K=I.split(",")}var p=a("tbody tr[id^='"+x.table_id+"_row_']",A.bDiv);for(var J=0;J<p.length;J++){var L=p.eq(parseInt(J-1));var O=L.children("td");for(var H=0;H<K.length;H++){if(t.color){a(O[parseInt(K[H]-1)]).css("color","")}if(t.bgColor){for(var Q=0;Q<A.reverseRowOrColumnCol.setCol.bgColor.length;Q++){var g=A.reverseRowOrColumnCol.setCol.bgColor[Q];if(g.indexOf("#")==-1){if(a(O[parseInt(K[H]-1)]).hasClass("customBgCol"+g)){a(O[parseInt(K[H]-1)]).removeClass("customBgCol"+g)}}else{if(a(O[parseInt(K[H]-1)]).hasClass("customBgCol"+g.substr(1))){a(O[parseInt(K[H]-1)]).removeClass("customBgCol"+g.substr(1))}}}a(O[parseInt(K[H]-1)]).removeClass("customBgCol")}}}}}}else{var p=a("tbody tr[id^='"+x.table_id+"_row_']",A.bDiv);var O=p.children("td");for(var J=0;J<O.length;J++){if(t.color){a(O[J]).css("color","")}if(t.bgColor){for(var Q=0;Q<A.reverseRowOrColumnCol.setCol.bgColor.length;Q++){var g=A.reverseRowOrColumnCol.setCol.bgColor[Q];if(g.indexOf("#")==-1){if(a(O[J]).hasClass("customBgCol"+g)){a(O[J]).removeClass("customBgCol"+g)}}else{if(a(O[J]).hasClass("customBgCol"+g.substr(1))){a(O[J]).removeClass("customBgCol"+g.substr(1))}}}a(O[J]).removeClass("customBgCol")}}}if(t.isReloadCall==undefined){A.reverseRowOrColumnCol.clearCol.isCall=true;A.reverseRowOrColumnCol.clearCol.param.push(t)}},getTrsByKey:function(p){var G=[];if(p&&p.identityColumnValue){var J=p.identityColumnValue;for(var I=0;I<x.colModel.length;I++){if(x.colModel[I].name==p.identifyColumn){var g=a("tbody tr[id^='"+x.table_id+"_row_']",A.bDiv);for(var t=0,K=J.length;t<K;t++){for(var H=0;H<g.length;H++){var L=a(g[H]).children("td");var M=a("div",a(L[(x.showcheckbox?I+1:I)])).text();if(M==J[t]){G.push(g[H])}}}break}}}return G},checkRowsByKeyColumn:function(G){if(G&&G.identifyColumn){var p=A.getTrsByKey(G);for(var t=0,g=p.length;t<g;t++){if(x.showcheckbox){a(p[t]).addClass("trSelected");a("input.itemchk",p[t]).attr("checked","checked")}else{a(p[0]).addClass("trSelected")}if(G.callCheckEvent!="undefined"&&G.callCheckEvent){if(x.onrowchecked){if(x.showcheckbox){x.onrowchecked.call(this,{isChecked:true,tr_object:a(p[t]),isHeadCheckbox:false})}else{x.onrowchecked.call(this,{isChecked:true,tr_object:a(p[0]),isHeadCheckbox:false})}}}A.freshCheckboxState()}}},uncheckRowsByKeyColumn:function(G){if(G&&G.identifyColumn){var p=A.getTrsByKey(G);for(var t=0,g=p.length;t<g;t++){if(x.showcheckbox){a(p[t]).removeClass("trSelected");a("input.itemchk",p[t]).attr("checked","")}else{a(p[0]).removeClass("trSelected")}if(G.callCheckEvent!="undefined"&&G.callCheckEvent){if(x.onrowchecked){if(x.showcheckbox){x.onrowchecked.call(this,{isChecked:false,tr_object:a(p[t]),isHeadCheckbox:false})}else{x.onrowchecked.call(this,{isChecked:false,tr_object:a(p[0]),isHeadCheckbox:false})}}}A.freshCheckboxState()}}},updateRowData:function(t){var I=[];if(t.identifyCloumn||t.identifyColumn){for(var K=0;K<x.colModel.length;K++){if(x.colModel[K].name==t.identifyCloumn||x.colModel[K].name==t.identifyColumn){var g=a("tbody tr[id^='"+x.table_id+"_row_']",A.bDiv);for(var J=0;J<g.length;J++){var L=a(g[J]).children("td");var O=a("div",a(L[(x.showcheckbox?K+1:K)])).text();if(O==t.identifyCloumnValue||O==t.identifyColumnValue){I.push(g[J]);break}}break}}}if(I.length){if(t.data){for(var H=0;H<I.length;H++){var P="";var L=a(I[H]).children("td");for(var K=0;K<x.colModel.length;K++){var p=x.colModel[K].name;var N;if(p.indexOf(".")!=-1){var M=p.split(".");N=t.data;for(var J=0;J<M.length;J++){if(N[M[J]]!=undefined&&N[M[J]]!=null){N=A.parseData({data:N[M[J]],colModel:x.colModel[K]})}else{N=""}}}else{if(t.data[p]!=undefined&&t.data[p]!=null){N=A.parseData({data:t.data[p],colModel:x.colModel[K]})}else{N=""}}N=N?N:"";if(typeof(N)=="string"){P=P+N.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replaceAll('"',"&quot;")}else{P=P+N}if(K<x.colModel.length-1){P=P+"_FG$SP_"}var G=a("div",L[(x.showcheckbox?K+1:K)]);G.text(N)}a(I[H]).attr("chd",P);for(var K=0;K<x.colModel.length;K++){if(x.colModel[K]&&x.colModel[K].fireEvent){x.colModel[K].fireEvent({tr_object:a(I[H]),div_object:x.showcheckbox?a("div",L[K+1])[0]:a("div",L[K])[0],grid:A})}}}}}},deleteRowData:function(p){var I=[];if(p&&p.rowNum){var K=p.rowNum.split(",");str="";for(var H=0;H<K.length;H++){if(!isNaN(parseInt(K[H]))){if(str.indexOf(K[H])==-1){str=str+K[H]+";";I[I.length]=a("tbody tr[id^="+x.table_id+"_row_]:eq("+(parseInt(K[H]))+")",A.bDiv)}}}for(var H=0;H<I.length;H++){I[H].remove()}}else{if(p&&p.data){var O="";for(var H=0;H<p.data.length;H++){for(var t=0;t<x.colModel.length;t++){colModel=x.colModel[t];var M=colModel.name;tdData=A.parseJson({data:p.data[H],colName:M,col:colModel});O+=tdData+"_FG$SP_"}var J=O.lastIndexOf("_FG$SP_");O=O.substr(0,J);a("tbody tr",A.bDiv).each(function(){if(a(this).attr("chd")==O&&a(this).attr("change")){a(this).remove();return false}});O=""}}else{if(p&&p.keyValue&&p.identifyColumn){var G=null;for(var H=0;H<x.colModel.length;H++){if(x.colModel[H].name==p.identifyColumn||x.colModel[H].name==p.identifyColumn){var g=a("tbody tr[id^='"+x.table_id+"_row_']",A.bDiv);for(var t=0;t<g.length;t++){var L=a(g[t]).children("td");var N=a("div",a(L[(x.showcheckbox?H+1:H)])).text();if(N==p.keyValue||N==p.keyValue){G=g[t];break}}break}}if(G){a(G).remove()}}else{if(x.showcheckbox){I=a(":checkbox:checked.itemchk",A.bDiv).parent().parent().parent()}else{I=a("tbody tr[id^="+x.table_id+"_row_].trSelected",A.bDiv)}if(I){I.each(function(){a(this).remove()})}}}}A.freshCheckboxState();if(x.autoHeight){A.calContentHeight()}},addRowData:function(I){var L=0;try{var g=rn=a("tbody tr",A.bDiv).length;var S;if(I&&I.data){for(var P=0;P<I.data.length;P++){if(I.rowNum&&!isNaN(parseInt(I.rowNum,10))){I.rowNum=parseInt(I.rowNum);if(I.rowNum<=0){I.rowNum=L}else{if(I.rowNum>=rn){I.rowNum=rn}}}else{I.rowNum=L}if(rn==0){var U={total:1,page:1,rows:[{id:"0",cell:["","","","",""]}]};if(x.usepager){a(".pPageStat",this.pDiv).css("display","none")}A.addData(U);if(x.usepager){a(".pPageStat",this.pDiv).css("display","block");a(".pPageStat",this.pDiv).html(x.nomsg)}S=a("tbody tr:first",A.bDiv)}var Q=a("tbody tr",A.bDiv).filter(function(X){return X==0});var K=null;K=Q.clone();K[0].id="grid_new_add";K.removeClass("trSelected").addClass("newadd_tr");a("td",K).removeClass();a("td",K).css("color","#000");var W=K.children("td");if(!A.reverseRowOrColumnCol.setCol.isCall){for(var O=0;O<W.length;O++){a(W[O]).css("color","")}}K.removeClass();if(x.rowbinddata){K.attr("ch","")}var p="";var M=null;var H="",N=null;K.children("td").each(function(X){N=a("div",this);if(x.showcheckbox){if(X>0){M=x.colModel[X-1]}else{if(X==0){H="<input type='checkbox' class='itemchk'/>"}}}else{M=x.colModel[X]}if(M){var Y=M.name;H=A.parseJson({data:I.data[P],colName:Y,col:M})}N.html(H);if(x.showcheckbox&&X==0){H=""}else{p=p+H+"_FG$SP_"}N.attr("title",H);H=""});var V=p.lastIndexOf("_FG$SP");p=p.substr(0,V);K[0].setAttribute("chd",p);if(I.rowNum==L||I.rowNum<rn){var J=a("tbody tr",A.bDiv);var N=J[I.rowNum];K.insertBefore(a(N))}else{var N=null;var J=a("tbody tr",A.bDiv);var N=J[I.rowNum-1];K.insertAfter(a(N))}if(rn==0){S.remove()}g=rn=a("tbody tr",A.bDiv).length}var t=a(A.bDiv).find("tr").filter(function(){return this.id=="grid_new_add"});var R=t.length;for(var P=0;P<R;P++){if(!(typeof I.isLaterClearId!="undefined"&&I.isLaterClearId)){var G=x.table_id+"_row_"+g;t[P].id=G}for(var O=0;O<x.colModel.length;O++){if(x.colModel[O]&&x.colModel[O].fireEvent){x.colModel[O].fireEvent({tr_object:t[P],div_object:x.showcheckbox?a("td:eq("+(O+1)+") div",t[P])[0]:a("td:eq("+O+") div",t[P])[0],grid:A})}}A.rowTrProp.call(t[P]);A.rowProp.call(t[P]);A.freshCheckboxState()}}A.freshRowStriped();if(x.autoHeight){A.calContentHeight()}else{A.reSize()}}catch(T){alert(T.name+": "+T.message)}},freshRowStriped:function(){if(x.striped){a("tbody tr:even",A.bDiv).removeClass("erow");a("tbody tr:odd",A.bDiv).addClass("erow")}},getNewRows:function(){return a("tr[id='grid_new_add']",A.bDiv)},getRowObject:function(p){var t=[];if(p){if(p.rowNum){var H=p.rowNum.split(",");str="";for(var G=0;G<H.length;G++){if(!isNaN(parseInt(H[G]))){if(str.indexOf(H[G])==-1){str=str+H[G]+";";t[t.length]=a("tbody tr[id^="+x.table_id+"_row_]:eq("+H[G]+")",A.bDiv)}}}}}else{if(x.showcheckbox){var g=a(":checkbox:checked.itemchk",A.bDiv);for(var G=0;G<g.length;G++){t.push(a(g[G]).parent().parent().parent())}}else{t.push(a("tbody tr.trSelected",A.bDiv))}}return t},getSelectIndex:function(p){var J="";if(p&&p.rowObject){J=p.rowObject.rowIndex;return J+","}else{if(p&&p.data){var I="";for(var G=0;G<x.colModel.length;G++){var H=x.colModel[G].name;tdData=A.parseJson({data:p.data,colName:H,col:x.colModel[G]});I=I+tdData+"_FG$SP_"}var t=I.lastIndexOf("_FG$SP_");I=I.substr(0,t);var g=a("tbody tr[id^="+x.table_id+"_row_]",A.bDiv);g.each(function(K){if(a(this).attr("chd")==I){J=K+","}});return J}else{if(x.showcheckbox){arr=a(":checkbox:checked.itemchk",A.bDiv).parent().parent().parent()}else{arr=a("tbody tr[id^="+x.table_id+"_row_].trSelected",A.bDiv)}}}if(arr){if(arr.length>1){for(var G=0;G<arr.length;G++){J=J+a("tbody tr[id^="+x.table_id+"_row_]",A.bDiv).index(arr[G])+","}}else{J=a("tbody tr[id^="+x.table_id+"_row_]",A.bDiv).index(arr)+","}return J}else{return"0,"}},applyEvent:function(){if(x.colModel){var p,g,t;a("tbody tr",v).each(function(G){p=this;a(x.colModel).each(function(H){if(this.fireEvent){g=a(p).children()[x.showcheckbox?(H+1):H];t=a(g).children()[0];this.fireEvent({tr_object:p,div_object:t,grid:A});if(x.autoHeight){A.calContentHeight()}}})})}},dealData:function(p){try{var G=p.resultID;var g=p.resultMsg;if(G){if(G==x.successResultID){return true}else{if(x.showErrorMsg){alert(g)}return false}}else{alert(x.errormsg);return false}}catch(t){throw t}},changeJsonObject:function(O,G){try{var g;var H;var p=[{}];p[0].total=O.total;p[0].page=O.page;p[0].rows=[];p[0].oriDateValue=[];var R=x.colModel.length;var K="";var N;var M=0;if(p[0].page){M=x.rp*(parseInt(p[0].page)-1);M=M>=0?M:0}if(O&&O.resultList){for(var J=0;J<O.resultList.length;J++){N=O.resultList[J];if(N){var L=new Array(R);for(var I=0;I<R;I++){H=x.colModel[I].name;if(H.indexOf(".")!=-1){var P=H.split(".");K=N[P[0]];for(var t=1;t<P.length;t++){if(K!=undefined&&K[P[t]]!=undefined&&K[P[t]]!=null){K=typeof(K[P[t]])=="boolean"?K[P[t]]+"":K[P[t]]}else{K=""}}}else{if(N[H]!=undefined&&N[H]!=null){K=typeof(N[H])=="boolean"?N[H]+"":N[H]}else{K=""}}if(typeof(K)=="number"){K=K==0?"0":K}else{K=K?K:""}L[I]=K}p[0].rows.push({id:(M+J),cell:L})}}}return p}catch(Q){throw Q}},parseData:function(t){if(t.colModel.ct&&t.colModel.ct.type=="date"){var g=t.colModel.ct.format;return t.data=A.dateToStr(t.data,g)}else{return typeof(t.data)=="boolean"?t.data+"":t.data}},dateToStr:function(t,I){var H=t;if(t.constructor==Date){t=new Date(t)}else{if(t.constructor==String&&t!=""){t=new Date(Date.parse(t.replace(/-/g,"/")))}else{return""}}if(t=="Invalid Date"&&H.constructor==String){return H}else{if(t=="NaN"&&H.constructor==String){return H}else{if(I==null||I==""){I="yyyy-MM-dd hh:mm:ss"}var J={"Y+":"Y","y+":"y","M+":"M","o+":"o","d+":"d","D+":"D","h+":"h","H+":"H","m+":"m","i+":"i","s+":"s","S+":"S"};var g={Y:t.getFullYear(),y:t.getFullYear(),M:(t.getMonth()<9)?("0"+(1+t.getMonth())):(1+t.getMonth()),o:(1+t.getMonth()),d:(t.getDate()<10)?("0"+t.getDate()):t.getDate(),D:t.getDate(),h:(t.getHours()<10)?("0"+t.getHours()):t.getHours(),H:t.getHours(),m:(t.getMinutes()<10)?("0"+t.getMinutes()):t.getMinutes(),i:t.getMinutes(),s:(t.getSeconds()<10)?("0"+t.getSeconds()):t.getSeconds(),S:t.getSeconds()};var G=I;for(var p in J){if(new RegExp("("+p+")").test(I)){G=G.replace(RegExp.$1,g[J[p]])}}return G}}},freshParam:function(g){a.extend(x,g)},adjustOrder:function(H){var G=null;if(x.showcheckbox&&!x.clickRowDoCheck&&x.moveTrUnselected){G=a(A.bDiv).find("tbody tr[id^="+x.table_id+"_row_].trUnselected")}else{G=a(A.bDiv).find("tbody tr[id^="+x.table_id+"_row_].trSelected")}if(G.length==1){if(G!=undefined){var g=G.attr("id");var J=g.substr(0,g.lastIndexOf("_"));var p=g.substr(J.length+1,g.length);if(H.order=="up"){p=p-1;for(var t=0;t<G.length;t++){var I=a(G[t]).prev();if(I.length==0){alert("\u884c\u6570\u636e\u4e3a\u5f53\u524d\u5c42\u7ea7\u7684\u9876\u7ea7\uff0c\u65e0\u6cd5\u7ee7\u7eed\u5411\u4e0a\u79fb\u52a8");return false}I.before(G[t])}}else{if(H.order=="down"){p=parseInt(p)+1;for(var t=0;t<G.length;t++){var K=G.next();if(K.length==0){alert("\u5f53\u524d\u8282\u70b9\u5904\u4e8e\u5f53\u524d\u5c42\u7ea7\u7684\u6700\u540e\u4e00\u4e2a\u8282\u70b9\uff0c\u65e0\u6cd5\u7ee7\u7eed\u5f80\u4e0b\u79fb");return false}K.after(G[t])}}}}else{alert("\u8bf7\u5148\u9009\u4e2d\u4e00\u884c\u6570\u636e\u8fdb\u884c\u79fb\u52a8")}}else{if(G.length>1){alert("\u53ea\u80fd\u9488\u5bf9\u4e00\u884c\u6570\u636e\u8fdb\u884c\u79fb\u52a8")}else{alert("\u8bf7\u5148\u9009\u4e2d\u4e00\u884c\u6570\u636e\u8fdb\u884c\u79fb\u52a8")}}},changeChildrenId:function(J){var t=J.oldId;for(var p=0;p<J.data.length;p++){var g=a(J.data[p]).attr("id");var G=g.replace(J.oldId,J.newId);var I=G.substr(J.trPrefix.length+1,G.length);a(J.data[p]).attr("id",G);if(x.showcheckbox){var H=a(J.data[p]).children("td.chboxtd").children("div").find("input[id^='chk_']");if(H!=undefined){H.attr("id","chk_"+I);H.attr("value",I)}}}},getRowData:function(p){var G=[];var H=null;if(p){H=a(p).attr("chd")}else{if(!x.showcheckbox){var g=a(A.bDiv).find("tbody tr[id^="+x.table_id+"_row_]");for(var t=0;t<g.length;t++){if(a(g[t]).hasClass("trSelected")){H=a(g[t]).attr("chd");break}}}}if(H){G.push({});A.generalObject(G,H,0)}return G},getUnSelectedRowData:function(p){var G=[];var H=null;if(p){H=a(p).attr("chd")}else{if(x.showcheckbox){var g=a(A.bDiv).find("tbody tr[id^="+x.table_id+"_row_].trUnselected");for(var t=0;t<g.length;t++){H=a(g[t]).attr("chd")}}}if(H){G.push({});A.generalObject(G,H,0)}return G},getUnselectRowsData:function(){var p=[];var g=a("tbody tr[id^="+x.table_id+"_row_]:not(.trSelected)",A.bDiv);g.each(function(t){p.push({});chd=a(this).attr("chd");A.generalObject(p,chd,t)});return p},changeSort:function(g){if(this.loading){return true}a(A.nDiv).hide();a(A.nBtn).hide();if(x.sortname==a(g).attr("abbr")){if(x.sortorder=="asc"){x.sortorder="desc"}else{x.sortorder="asc"}}a(g).addClass("sorted").siblings().removeClass("sorted");a(".sdesc",this.hDiv).removeClass("sdesc");a(".sasc",this.hDiv).removeClass("sasc");a("div",g).addClass("s"+x.sortorder);x.sortname=a(g).attr("abbr");if(x.onChangeSort){x.onChangeSort(x.sortname,x.sortorder)}else{if(x.sortByStatic){this.populate({changeSort:true})}else{this.populate()}}},buildpager:function(){a(".pcontrol input",this.pDiv).val(x.page);a(".pcontrol span",this.pDiv).html(x.pages);var p=(parseInt(x.page)-1)*parseInt(x.rp)+1;var g=p+parseInt(x.rp)-1;if(x.total<g){g=x.total}var t=x.pagestat;if(x.userpagefloat=="right"&&x.newUserpage){t="\u603b{total}\u6761\uff0c\u7b2c{page}/{pages}\u9875\uff0c";t=t.replace(/{total}/,x.total);t=t.replace(/{page}/,x.page);t=t.replace(/{pages}/,x.pages)}else{t=t.replace(/{from}/,p);t=t.replace(/{to}/,g);t=t.replace(/{total}/,x.total)}if(x.usepager){a(".pPageStat",this.pDiv).html(t)}a("select",A.pDiv).val(x.rp)},doMask:function(I){var g=A.gDiv;if(x.maskObject){if(typeof(x.maskObject)=="string"){g=document.getElementById(x.maskObject)}else{if(typeof(x.maskObject)=="object"){g=x.maskObject}}}if(!A.maskDiv){A.maskDiv=document.createElement("div");A.maskDiv.setAttribute("id",x.container_id+"_maskDiv");A.maskDiv.className="gBlock";a(A.maskDiv).fadeTo(0,x.blockOpacity);if(a.browser.msie&&a.browser.version==6){var G="	<iframe style=\"display: block; z-index: -1; filter: alpha(Opacity='0'); left: -1px;		left: expression(((parseInt(document.getElementById('"+x.container_id+"_maskDiv').currentStyle.borderLeftWidth)||0)*-1)+'px'); 		width: expression(document.getElementById('"+x.container_id+"_maskDiv').offsetWidth+'px'); 		position: absolute; top: -1px; 		top: expression(((parseInt(document.getElementById('"+x.container_id+"_maskDiv').currentStyle.borderTopWidth)||0)*-1)+'px'); 		height: expression(document.getElementById('"+x.container_id+"_maskDiv').offsetHeight+'px');\"		tabIndex=-1 src=\"\" frameBorder=0>	</iframe>";a(A.maskDiv).prepend(G)}}var H=a(g).height();var N=a(g).width()+2;var J=0;a(A.maskDiv).css({width:N,height:H,position:"absolute",marginBottom:0,zIndex:1});if(!A.maskMsgDiv){A.maskMsgDiv=document.createElement("div");A.maskMsgDiv.className="grid-mask-msg";a(A.maskMsgDiv).html("<div>\u8bf7\u7a0d\u5019...</div>")}if(I=="mask"){if(!A.tmpDiv){A.tmpDiv=document.createElement("div");A.tmpDiv.className=x.gridClass}a(A.tmpDiv).append(A.maskDiv);a(A.tmpDiv).append(A.maskMsgDiv);if(x.maskObject){a(g).prepend(A.tmpDiv)}else{a(this.gDiv).prepend(A.tmpDiv)}var L=Math.round(a(g).height()/2-(a(A.maskMsgDiv).height()-parseInt(a(A.maskMsgDiv).css("padding-top"))-parseInt(a(A.maskMsgDiv).css("padding-bottom")))/2);var p=Math.round(a(g).width()/2-(a(A.maskMsgDiv).width()-parseInt(a(A.maskMsgDiv).css("padding-left"))-parseInt(a(A.maskMsgDiv).css("padding-right")))/2);p=p-4;var K,M;if(x.maskObject){K=a(g).offset().top+L+"px";M=a(g).offset().left+p+"px"}else{K=L+"px";M=p+"px"}a(A.maskMsgDiv).css("top",K);a(A.maskMsgDiv).css("left",M)}else{if(I=="unmask"){a(A.maskMsgDiv).remove();a(A.maskDiv).remove();a(A.tmpDiv).remove()}}},recordBeforeStatus:function(g){var p=new Object();if(x.showcheckbox){p.checkData=A.getRowsData();p.unCheckData=A.getUnSelectedRowData()}else{p.checkData=A.getRowData()}return p},loadBeforeStatus:function(I,J){if(J&&I){var O=[];var N=false;var L=[];for(var p=0;p<x.colModel.length;p++){if(x.colModel[p].isKey){L.push(x.colModel[p])}}var g=a("tbody tr[id^='"+x.table_id+"_row_']",A.bDiv);for(var K=0;K<g.length;K++){var H=A.getRowData(g[K]);if(I.checkData){var P=I.checkData;for(var G=0;G<P.length;G++){N=A.freshStyle({trData:H[0],data:P[G],identifyColumn:L});if(N){a(g[K]).addClass("trSelected");if(x.showcheckbox){a("input:checkbox",g[K]).attr("checked",true)}}}}if(I.unCheckData){var M=I.unCheckData;for(var t=0;t<M.length;t++){N=A.freshStyle({trData:H[0],data:M[t],identifyColumn:L});if(N){if(!x.clickRowDoCheck){a(g[K]).addClass("trUnselected")}}}}}}},freshStyle:function(t){var H=t.data;var G=false;flag=[];for(var p=0;p<t.identifyColumn.length;p++){if(A.parseJson({data:t.trData,col:t.identifyColumn[p],colName:t.identifyColumn[p].name})==A.parseJson({data:H,col:t.identifyColumn[p],colName:t.identifyColumn[p].name})){flag.push(true)}else{flag.push(false)}}for(var g=0;g<flag.length;g++){if(flag[g]==true){G=true}else{G=false;break}}return G},parseJson:function(K){var G="";var p=K.col;var t=K.colName;var g=t.indexOf(".");if(g!=-1){var J=t.substr(0,g);var I=t.substr(g+1,t.length);function H(M,N){var L=N.indexOf(".");if(L!=-1){var O=N.substr(0,L);var N=N.substr(L+1,N.length);H(M[O],N)}else{if(M!=undefined&&M[N]!=undefined&&M[N]!=null){return A.parseData({data:M[N],colModel:p})}else{return""}}}G=H(K.data[J],I)}else{if(K.data[t]!=undefined&&K.data[t]!=null){G=A.parseData({data:K.data[t],colModel:p})}else{G=""}}return G},populate:function(t){if(this.loading){return true}if(x.onSubmit){var p=x.onSubmit();if(!p){return false}}this.loading=true;if(x.usepager){a(".pPageStat",this.pDiv).html(x.procmsg);a(".pReload",this.pDiv).addClass("loading")}a(A.block).css({top:A.bDiv.offsetTop});if(x.hideOnSubmit){A.doMask("mask")}if(a.browser.opera){a(v).css("visibility","hidden")}if(!x.newp){x.newp=1}if(x.page>x.pages){x.page=x.pages}var H=[{name:"pageNumber",value:x.newp},{name:"pageSize",value:x.usepager?x.rp:1000},{name:"sortname",value:x.sortname},{name:"sortorder",value:x.sortorder},{name:"query",value:x.query},{name:"qtype",value:x.qtype},{name:"qop",value:x.qop}];if(x.extParam){for(var G=0;G<x.extParam.length;G++){H[H.length]=x.extParam[G]}}function g(){if(A.dealData(x.tableData)){var K;if(t&&t.fnName=="fresh"&&t.isRecoverRowState){K=A.recordBeforeStatus(t)}if(x.sortByStatic){x.tableData.resultList=A.sortData(x.tableData.resultList)}A.addData(A.changeJsonObject(x.tableData,{pageNumber:x.newp,pageSize:x.rp})[0]);if(x.showcheckbox){A.doUncheck()}if(t&&t.fnName=="fresh"&&t.isRecoverRowState){A.loadBeforeStatus(K,t)}if(x.isReloadCall&&A.reverseRowOrColumnCol.setCol.isCall){for(var I=0;I<A.reverseRowOrColumnCol.setCol.bgColor.length;I++){a("#grid_customBg_"+A.reverseRowOrColumnCol.setCol.bgColor[I]).remove()}for(var J=0;J<A.reverseRowOrColumnCol.setCol.param.length;J++){A.reverseRowOrColumnCol.setCol.param[J].isReloadCall=true;A.setRowOrColumnCol(A.reverseRowOrColumnCol.setCol.param[J])}}if(A.reverseRowOrColumnCol.clearCol.isCall){for(var J=0;J<A.reverseRowOrColumnCol.clearCol.param.length;J++){A.reverseRowOrColumnCol.clearCol.param[J].isReloadCall=true;A.clearRowOrColumnCol(A.reverseRowOrColumnCol.clearCol.param[J])}}x.isSuccessSearch=true}else{A.hideLoading()}}if(x.tableData&&!x.url){g()}else{if(x.url){if(t&&t.changeSort!=undefined&&t.changeSort){g()}else{a.ajax({type:x.method,url:x.url,data:H,dataType:x.dataType,success:function(I){if(I!=null&&I.error!=null){if(x.onError){x.onError(I);A.hideLoading()}}else{x.tableData=I;g()}},error:function(I){try{if(x.onError){x.onError(I)}else{alert("\u83b7\u53d6\u6570\u636e\u53d1\u751f\u5f02\u5e38")}A.hideLoading()}catch(J){}}})}}}},sortData:function(t){var g=null;for(var p=0;p<x.colModel.length;p++){if(x.colModel[p].name==x.sortname){g=x.colModel[p];break}}if(g!=null){t.sort(function(H,G){H=A.parseJson({data:H,colName:x.sortname,col:g});G=A.parseJson({data:G,colName:x.sortname,col:g});if(!isNaN(H-G)){if(x.sortorder=="desc"){return G-H}else{return H-G}}else{if(x.sortorder=="desc"){return G.localeCompare(H)}else{return H.localeCompare(G)}}})}return t},doSearch:function(){var g=a("select[name=qtype]",A.sDiv).val();var p=g.split("$");var t=-1;if(p.length!=3){x.qop="Eq";x.qtype=g}else{x.qop=p[1];x.qtype=p[0];t=parseInt(p[2])}x.query=a("input[name=q]",A.sDiv).val();if(x.query!=""&&x.searchitems&&t>=0&&x.searchitems.length>t){if(x.searchitems[t].reg){if(!x.searchitems[t].reg.test(x.query)){alert("\u4f60\u7684\u8f93\u5165\u4e0d\u7b26\u5408\u8981\u6c42!");return}}}x.newp=1;this.populate()},changePage:function(t,p){if(this.loading){return true}switch(t){case"first":x.newp=1;break;case"prev":if(x.page>1){x.newp=parseInt(x.page)-1}break;case"next":if(x.page<x.pages){x.newp=parseInt(x.page)+1}else{x.newp=x.pages}break;case"last":x.newp=x.pages;break;case"input":var g=parseInt(a(".pcontrol input",this.pDiv).val());if(isNaN(g)){g=1}if(g<1){g=1}else{if(g>x.pages){g=x.pages}}a(".pcontrol input",this.pDiv).val(g);x.newp=g;break}if(x.newp==x.page){if(t!="reload"&&t!="change"){return false}}if(t!="reload"&&x.onChangePage&&!x.url){x.onChangePage(x.newp,x.rp)}else{this.populate(p);if(!p){p={isCallOnChangePage:true}}if(p.isCallOnChangePage&&x.onChangePage){x.onChangePage(x.newp,x.rp)}}},cellProp:function(I,H,G){var t=document.createElement("div");if(G!=null){if(x.sortname==a(G).attr("abbr")&&x.sortname){this.className="sorted"}a(t).css({textAlign:G.align,width:a("div:first",G)[0].style.width});if(G.hide){a(this).css("display","none")}}if(x.nowrap==false){a(t).css("white-space","normal")}if(this.innerHTML==""){this.innerHTML="&nbsp;"}t.innerHTML=this.innerHTML;var p=a(this).parent()[0];var g=false;if(p.id){g=p.id.substr(3)}if(G!=null){if(G.format){G.format(t,g)}}a("input.itemchk",t).each(function(){a(this).bind("click",function(){if(this.checked){a(H).addClass("trSelected")}else{a(H).removeClass("trSelected")}if(x.onrowchecked){x.onrowchecked.call(this,{isChecked:this.checked,tr_object:a(H),isHeadCheckbox:false})}})});a(this).empty().append(t).removeAttr("width")},addCellProp:function(){var g=this.cellProp;a("tbody tr td",A.bDiv).each(function(){var G=a("td",a(this).parent()).index(this);var p=a("th:eq("+G+")",A.hDiv).get(0);var t=a(this).parent();g.call(this,G,t,p)});g=null},getAllData:function(){var t=[];var p=a("tbody tr[id^="+x.table_id+"_row_]",A.bDiv);var g=p.length;var G=null;p.each(function(H){t.push({});G=a(this).attr("chd");A.generalObject(t,G,H)});return t},getChangeData:function(){var t=[];var p=a("tr[id^="+x.table_id+"_row_].change",A.bDiv);var g=p.length;var G=null;p.each(function(H){t.push({});G=a(this).attr("chd");A.generalObject(t,G,H)});return t},getRowsData:function(){var p=a(":checkbox:checked.itemchk",A.bDiv);var g=p.length;var G=[];for(var t=0;t<g;t++){G.push({})}var H=null;for(var t=0;t<g;t++){H=a(p[t]).parent().parent().parent().attr("chd");A.generalObject(G,H,t)}return G},flexTitle:function(p){var g=a("#"+x.container_id+" .mDiv .ftitle");g.text(p.title)},cancelAllSelectState:function(){a("tbody tr[id^="+x.table_id+"_row_]",A.bDiv).each(function(){if((a(this).attr("class")+" ").indexOf("trSelected")!=-1){a(this).removeClass("trSelected");if(x.showcheckbox){a("input:checkbox",this).attr("checked",false)}}});A.freshCheckboxState()},generalObject:function(g,L,J){var I=L.split("_FG$SP_");var p=x.colModel;var t="",G="";for(var H=0;H<p.length;H++){t=p[H].name;if(p[H].ct&&p[H].ct.type=="date"){if(I[H]!=""){if(I[H]&&I[H].indexOf("-")!=-1){G=new Date(Date.parse(I[H].replace(/-/g,"/")))}else{G=new Date(I[H])}}else{G=null}}else{G=I[H]}K({col_name:t,row_object:g[J],col_value:G})}function K(R){var O=R.col_name;var M=O.indexOf(".");var N=R.row_object;var S=R.col_value;if(M==-1){N[O]=S}else{var Q=O.substr(0,M);var P=O.substr(M+1,O.length);if(!N[Q]){N[Q]={}}K({col_name:P,row_object:N[Q],col_value:S})}}},getCellDim:function(t){var J=parseInt(a(t).height());var g=parseInt(a(t).parent().height());var H=parseInt(t.style.width);var L=parseInt(a(t).parent().width());var I=t.offsetParent.offsetTop;var p=t.offsetParent.offsetLeft;var K=parseInt(a(t).css("paddingLeft"));var G=parseInt(a(t).css("paddingTop"));return{ht:J,wt:H,top:I,left:p,pdl:K,pdt:G,pht:g,pwt:L}},rowProp:function(){if(x.rowhandler){x.rowhandler(this,{grid:A})}if(a.browser.msie&&a.browser.version<7){a(this).hover(function(){a(this).addClass("trOver")},function(){a(this).removeClass("trOver")})}a(this).click(function(g){if(a(g.target).hasClass("itemchk")){return}if((a(this).attr("class")+" ").indexOf("trSelected")==-1){if(x.showcheckbox){if(x.disCheckbox){if(!a("input.itemchk",this).attr("disabled")){if(x.clickRowDoCheck){a(this).addClass("trSelected");a("input.itemchk",this).attr("checked","checked");A.freshCheckboxState();if(x.onrowchecked){x.onrowchecked.call(this,{isChecked:a("input.itemchk",this).attr("checked"),tr_object:this,isHeadCheckbox:false})}}else{a("tr.trUnselected",A.bDiv).removeClass("trUnselected");a(this).addClass("trUnselected")}}else{a("tr.trUnselected",A.bDiv).removeClass("trUnselected");a(this).addClass("trUnselected")}}else{if(x.clickRowDoCheck){a(this).addClass("trSelected");a("input.itemchk",this).attr("checked","checked");A.freshCheckboxState();if(x.onrowchecked){x.onrowchecked.call(this,{isChecked:a("input.itemchk",this).attr("checked"),tr_object:this,isHeadCheckbox:false})}}else{a("tr.trUnselected",A.bDiv).removeClass("trUnselected");a(this).addClass("trUnselected")}}}else{a("tr.trSelected",A.bDiv).removeClass("trSelected");a(this).addClass("trSelected")}}else{if(x.showcheckbox){if(x.clickRowDoCheck){a("input.itemchk",this).removeAttr("checked");a(this).removeClass("trSelected");A.doUncheck();if(x.onrowchecked){x.onrowchecked.call(this,{isChecked:a("input.itemchk",this).attr("checked"),tr_object:this,isHeadCheckbox:false})}}else{a("tr.trUnselected",A.bDiv).removeClass("trUnselected");a(this).addClass("trUnselected")}}else{if(x.onRowSelectedChangeClass){a(this).removeClass("trSelected")}}}})},addRowProp:function(){var g=this.rowProp;var p=this.rowTrProp;a("tbody tr",A.bDiv).each(function(){p.call(this);g.call(this)});p=null;g=null},stopPropagation:function(g){if(g&&g.stopPropagation){g.stopPropagation()}else{window.event.cancelBubble=true}},getRecordCount:function(){var g=a(A.bDiv).children("table").children("tbody").children("tr");return g.length},rowTrProp:function(){a("input.itemchk",this).each(function(){var g=a(this).parent().parent().parent();a(this).click(function(p){if(this.checked){g.addClass("trSelected");A.freshCheckboxState()}else{g.removeClass("trSelected");A.doUncheck()}if(x.onrowchecked){x.onrowchecked.call(this,{isChecked:this.checked,tr_object:g,isHeadCheckbox:false})}A.stopPropagation(p)})})},checkAllOrNot:function(g){var p=a(this).attr("checked");a("tbody tr[id^="+x.table_id+"_row_]",A.bDiv).each(function(){if(!a("input.itemchk",this).attr("disabled")){if(p){a(this).addClass("trSelected")}else{a(this).removeClass("trSelected")}}});a("input.itemchk",A.bDiv).each(function(){if(!a(this).attr("disabled")){this.checked=p;var t=a(this).parent().parent().parent();if(x.onrowchecked){x.onrowchecked.call(this,{isChecked:this.checked,tr_object:t,isHeadCheckbox:true})}}})},freshCheckboxState:function(){if(a("tbody tr",A.bDiv).length>0&&a("tbody tr input[type='checkbox']:not(:disabled):not(:checked).itemchk",A.bDiv).length==0){if(a("tbody tr input[type='checkbox']:not(:disabled)",A.bDiv).length==0){A.doUncheck()}else{A.doCheck()}}else{A.doUncheck()}},doUncheck:function(){a("th div input[type='checkbox']",A.hDiv).filter(function(){return a(this).hasClass("noborder")}).attr("checked",false)},doCheck:function(){a("th div input[type='checkbox']",A.hDiv).filter(function(){return a(this).hasClass("noborder")}).attr("checked",true)},checkAll:function(){a("input.itemchk",A.bDiv).each(function(){if(!a(this).attr("disabled")){this.checked=true;var g=a(this).parent().parent().parent();a(g).addClass("trSelected");if(x.onrowchecked){x.onrowchecked.call(this,{isChecked:this.checked,tr_object:g,isHeadCheckbox:true})}}});A.freshCheckboxState()},enabledButton:function(t){if(t.id){var g=document.getElementById(t.id);if(g){a(g).removeAttr("disabled");if(!a.browser.msie){a(g).css("color","rgb(0,0,0)")}if(g.disabledClass){jQuery("span",g).removeClass(g.disabledClass)}if(!(a(g).data("events")&&a(g).data("events")["click"])){if(this.onpress){a(g).bind("click",function(){this.onpress(this.name,A.gDiv)})}}}}},disabledButton:function(t){if(t.id){var g=document.getElementById(t.id);if(g){a(g).attr("disabled","disabled");if(!a.browser.msie){a(g).css("color","grey")}if(g.disabledClass){jQuery("span",g).addClass(g.disabledClass)}}}if(a(g).data("events")&&a(g).data("events")["click"]){a(g).unbind("click")}},doSortClass:function(){a("thead tr:first th",A.hDiv).each(function(){var g=a(this).children("div");if(a(this).attr("abbr")){a(this).click(function(t){if(!a(this).hasClass("thOver")){return false}var p=(t.target||t.srcElement);if(p.href||p.type){return true}if(A.getRecordCount()>0){A.changeSort(this)}});if(a(this).attr("abbr")==x.sortname&&A.getRecordCount()>0){a(this).attr("class","sorted");g.attr("class","s"+x.sortorder)}}if(!a(this).attr("isch")){a(this).hover(function(){if(a(this).attr("abbr")!=x.sortname&&!A.colCopy&&!A.colresize&&a(this).attr("abbr")&&A.getRecordCount()>0){a("div",this).addClass("s"+x.sortorder)}else{if(a(this).attr("abbr")==x.sortname&&!A.colCopy&&!A.colresize&&a(this).attr("abbr")&&A.getRecordCount()>0){var p="";if(x.sortorder=="asc"){p="desc"}else{p="asc"}a("div",this).removeClass("s"+x.sortorder).addClass("s"+p)}else{a("div",this).removeClass("s"+x.sortorder).removeClass("s"+p)}}},function(){if(a(this).attr("abbr")!=x.sortname&&A.getRecordCount()>0){a("div",this).removeClass("s"+x.sortorder)}else{if(a(this).attr("abbr")==x.sortname&&A.getRecordCount()>0){var p="";if(x.sortorder=="asc"){p="desc"}else{p="asc"}a("div",this).addClass("s"+x.sortorder).removeClass("s"+p)}else{a("div",this).removeClass("s"+x.sortorder).removeClass("s"+p)}}if(A.colCopy){a(A.cdropleft).remove();a(A.cdropright).remove();A.dcolt=null}})}})},freshSortClass:function(){var g=a("thead tr:first th",A.hDiv);for(var p=0;p<g.length;p++){if(!a(g[p]).attr("isch")&&a(g[p]).attr("abbr")==x.sortname){if(!A.colCopy&&!A.colresize&&a(g[p]).attr("abbr")&&A.getRecordCount()>0){a("div",g[p]).addClass("s"+x.sortorder)}else{if(!A.colCopy&&!A.colresize&&a(g[p]).attr("abbr")&&A.getRecordCount()==0){a("div",g[p]).removeClass("s"+x.sortorder)}}break}}},jsPath:function(G){var p=document.getElementsByTagName("script");for(var g=0;g<p.length;g++){if(p[g].src.lastIndexOf(G)>=0){var t=p[g].src.replace(/\\/gi,"/");return t.substring(0,t.lastIndexOf("/")+1)}}return""},initExportDivContent:function(){var g=0;var t=0;var G="";var p=true;a("th div",A.hDiv).each(function(){var K=false;var I=a("th[axis='col"+g+"']",A.hDiv)[0];var J=a(this).parents("th").attr("axis");J=J.substr(3);if(I==null){return}var H='checked="checked"';if(I.style.display=="none"){H=""}if(p){G+="<tr>\r";p=false}if(J==-1){g--}if(!(J==-1)&&x.colModel[J]["isData"]){K=true;G=G+'\t<td class="ndcol1"><input type="checkbox" '+H+' class="togCol noborder" value="'+J+'" /></td>\r\t<td class="ndcol2">'+this.innerText+"</td>\r"}if(K&&t%2!=0){G+="</tr>\r";p=true}if(K){t++}g++});a("tbody",A.eDiv).append(G)},initExportDiv:function(){A.eDiv=document.createElement("div");A.eDiv.style.overFlow="auto";A.eDiv.style.maxHeight="300";A.eDiv.className="eDiv";A.eDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>";a(A.eDiv).css({display:"none"}).noSelect();a(A.eDiv).children("tbody").empty();A.initExportDivContent();a("tbody",A.eDiv).prepend('<tr class="tBar"><td colspan="6" class="tBar"><table><tr><td><span class="title">\u8bf7\u9009\u62e9\u5217</span></td><td class="button"><span id="export">\u786e\u5b9a</span></td><td class="button"><span id="cancel">\u53d6\u6d88</span></td><td class="button"><span id="reverseCheck">\u53cd\u9009</span></td><td class="button"><span id="checkAll">\u5168\u9009</span></td></tr></table></td></tr>');a(A.gDiv).prepend(A.eDiv);a("td.ndcol2",A.eDiv).click(function(){var g=a(this).prev().find("input")[0];if(g.checked){g.checked=""}else{g.checked="checked"}})},exportByColumns:function(G){var P={};var t=[];if(G&&G.btnName){var p;if(a(A.eDiv).is(":visible")){a(A.eDiv).hide()}else{if(A.eDiv){a(A.eDiv).remove()}A.initExportDiv();a(A.eDiv).show();var O=null;if(x.btnSameLineWithTitle){O=a("div[id='"+G.btnName+"']",A.mDiv)}else{O=a("div[id='"+G.btnName+"']",A.tDiv)}var M=O.width();var I=A.tDiv.offsetTop;var K=0;if(O.width()==null){if(x.btnLocation=="right"){K=0}a(A.eDiv).css({top:I+3,left:K})}else{var g=a(window).width()-O.offset().left-O.width();if(g>a(A.eDiv).width()){K=O.offset().left}else{K=a(A.bDiv).width()-a(A.eDiv).width()-O.width()}a(A.eDiv).css({top:I+O.height()+3,left:K})}if(!a("#export",A.eDiv).data("events")||!a("#export",A.eDiv).data("events")["click"]){a("#export",A.eDiv).click(function(){a(":checkbox:checked",A.eDiv).each(function(){var Q=a(this).attr("value");t.push(x.colModel[Q])});P.sortname=x.sortname;P.sortorder=x.sortorder;P.data=t;if(x.onSelectCol){if(t.length){x.onSelectCol.call(this,P);a(A.eDiv).hide()}else{alert("\u60a8\u8fd8\u6ca1\u6709\u9009\u62e9\u4efb\u4f55\u9700\u8981\u5bfc\u51fa\u7684\u5217")}}})}if(!a("#cancel",A.eDiv).data("events")||!a("#cancel",A.eDiv).data("events")["click"]){a("#cancel",A.eDiv).click(function(){a(A.eDiv).hide()})}if(!a("#checkAll",A.eDiv).data("events")||!a("#checkAll",A.eDiv).data("events")["click"]){a("#checkAll",A.eDiv).click(function(){a("td.ndcol1",A.eDiv).each(function(){a(this).children("input").attr("checked","checked")})})}if(!a("#reverseCheck",A.eDiv).data("events")||!a("#reverseCheck",A.eDiv).data("events")["click"]){a("#reverseCheck",A.eDiv).click(function(){a("td.ndcol1",A.eDiv).each(function(){var Q=a(this).children("input").attr("checked");if((Q==true||(typeof Q=="string"&&Q=="checked"))){a(this).children("input").attr("checked",false)}else{a(this).children("input").attr("checked",true)}})})}}}else{var N=a(".bbit-grid .hDivBox").children().children().children().children().filter(function(){return !(a(this).css("display")=="none")&&a(this).attr("isData")});for(var J=0;J<N.length;J++){var H=a(N[J]).attr("axis");var L=H.substr(3,H.length-1);if(L<0){continue}t.push(x.colModel[L])}P.sortname=x.sortname;P.sortorder=x.sortorder;P.data=t;return P}},exportAll:function(g){var G=[];var t=x.colModel;if(x.onSelectCol){for(var p=0;p<t.length;p++){if(t[p].isData){G.push(t[p])}}x.onSelectCol.call(this,{selectCols:G})}},pager:0};if(x.colModel){B=document.createElement("thead");tr=document.createElement("tr");if(x.showcheckbox){var c=jQuery("<th/>");var r=jQuery('<input type="checkbox"/>');r.addClass("noborder");c.addClass("cth").attr({axis:"col-1",width:"22",isch:true}).append(r);c[0].hide=false;a(tr).append(c)}var s=a("#"+x.container_id).outerWidth();if(typeof x.width=="string"&&x.width.indexOf("%")!=-1){if(x.showcheckbox){s=s*parseFloat(x.width)*0.01-2-32}else{s=s*parseFloat(x.width)*0.01-2}}else{if(typeof x.width=="string"&&x.width.indexOf("%")==-1){if(x.showcheckbox){s=parseFloat(x.width)-32-2}else{s=parseFloat(x.width)-2}}else{if(x.showcheckbox){s=x.width-32-2}else{s=x.width-2}}}var m=0;var w=1;for(i=0;i<x.colModel.length;i++){var q=x.colModel[i];if(typeof q.width=="string"&&q.width.indexOf("%")!=-1){if(q.hide){m+=parseInt(q.width)}}}w=1-m*0.01;for(i=0;i<x.colModel.length;i++){q=x.colModel[i];var j;var l=document.createElement("th");l.innerHTML=q.display;if(q.name&&q.sortable){a(l).attr("abbr",q.name)}a(l).attr("axis","col"+i);if(q.align){l.align=q.align}if(q.width){a(l).attr("oriWidth",q.width);if(typeof q.width=="string"&&q.width.indexOf("%")!=-1){x.dragable=false;j=s*(parseFloat(q.width)*0.01/w)-10}else{j=parseFloat(q.width)}a(l).attr("width",j)}else{a(l).attr("width",100)}if(q.hide){l.hide=true}else{l.hide=false}if(q.toggle!=undefined){l.toggle=q.toggle}if(q.format){l.format=q.format}if(q.isData==undefined){q.isData=true}if(q.isData){l.isData=true}else{q.isData=false;l.isData=false}if(q.ct){l.ct=q.ct}else{l.ct=false}if(q.isKey){l.isKey=q.isKey}else{l.isKey=false}if(q.title_align){l.title_align=q.title_align}else{l.title_align="center"}a(tr).append(l)}a(B).append(tr);a(v).prepend(B)}A.gDiv=document.createElement("div");A.mDiv=document.createElement("div");A.hDiv=document.createElement("div");A.bDiv=document.createElement("div");A.vDiv=document.createElement("div");A.rDiv=document.createElement("div");A.cDrag=document.createElement("div");A.block=document.createElement("div");A.nDiv=document.createElement("div");A.nBtn=document.createElement("div");A.iDiv=document.createElement("div");A.tDiv=document.createElement("div");A.sDiv=document.createElement("div");if(x.usepager){A.pDiv=document.createElement("div")}A.hTable=document.createElement("table");A.gDiv.className=x.gridClass;a(A.gDiv).css({position:"relative"});if(x.width!="auto"){A.gDiv.style.width=x.width+(((x.width+"").indexOf("%")!=-1)?"":"px")}if(a.browser.msie){a(A.gDiv).addClass("ie")}if(x.novstripe){a(A.gDiv).addClass("novstripe")}a(v).before(A.gDiv);a(A.gDiv).append(v);var F=a("#"+x.container_id).parents("table");if(F.length){var y=a(F[0]);if(!y.hasClass("grid_layout_style")){y.addClass("grid_layout_style")}}function f(){if(x.buttons){A.tDiv.className="tDiv";var t=document.createElement("div");t.className="tDiv2";if(x.btnLocation=="right"){if(a.browser.msie){a(t).css("float","right")}else{if(a.browser.mozilla){t.style.cssFloat="right"}}}for(i=0;i<x.buttons.length;i++){var p=x.buttons[i];if(!p.separator){var g=document.createElement("div");g.className="fbutton";if(p.displayname&&p.displayname!=""){g.innerHTML="<div><span style='padding-top: 3px;'>"+p.displayname+"</span></div>"}else{if(a.browser.msie&&a.browser.version==7){g.innerHTML="<div><span style='padding-top: 5px;'></span></div>"}else{g.innerHTML="<div><span style='padding-top: 16px;'></span></div>"}}g.disabled=p.disabled;if(p.title){g.title=p.title}if(p.bclass){a("span",g).addClass(p.bclass).css({paddingLeft:20})}g.name=p.name;g.id=p.id;g.onpress=p.onpress;if(p.disabledClass){g.disabledClass=p.disabledClass}if(p.onpress){a(g).bind("click",function(){this.onpress(this.name,A.gDiv)})}if(p.boverclass){a(g).attr("overClass",p.boverclass);a(g).attr("commonClass",p.bclass);(function(G){a(G).hover(function(){if(a("span",G).hasClass(a(G).attr("commonClass"))){a("span",G).removeClass(a(G).attr("commonClass"));a("span",G).addClass(a(G).attr("overClass"))}},function(){if(a("span",G).hasClass(a(G).attr("overClass"))){a("span",G).removeClass(a(G).attr("overClass"));a("span",G).addClass(a(G).attr("commonClass"))}})})(g)}a(t).append(g);if(a.browser.msie&&a.browser.version<7){a(g).hover(function(){a(this).addClass("fbOver")},function(){a(this).removeClass("fbOver")})}if(p.disabled){if(!a.browser.msie){a(g).css("color","grey")}if(p.disabledClass){jQuery("span",g).addClass(p.disabledClass)}a(g).unbind("click")}}else{a(t).append("<div class='btnseparator'></div>")}}a(A.tDiv).append(t);a(A.tDiv).append("<div style='clear:both'></div>");a(A.gDiv).prepend(A.tDiv)}}if(!x.btnSameLineWithTitle){f()}else{if(!x.title){f()}}A.hDiv.className="hDiv";a(v).before(A.hDiv);A.hTable.cellPadding=0;A.hTable.cellSpacing=0;a(A.hDiv).append('<div class="hDivBox"></div>');a("div",A.hDiv).append(A.hTable);var B=a("thead:first",v).get(0);if(B){a(A.hTable).append(B)}B=null;if(!x.colmodel){var u=0}a("thead tr:first th",A.hDiv).each(function(){var g=document.createElement("div");if(this.hide){a(this).hide()}if(!x.colmodel&&!a(this).attr("isch")){a(this).attr("axis","col"+u++)}a(g).css({textAlign:this.title_align,width:this.width+"px"});g.innerHTML=this.innerHTML;a(this).empty().append(g);if(!a(this).attr("isch")){a(this).mousedown(function(p){A.dragStart("colMove",p,this)}).hover(function(){if(!A.colresize&&!a(this).hasClass("thMove")&&!A.colCopy){a(this).addClass("thOver")}if(A.colCopy){var G=a("th",A.hDiv).index(this);if(G==A.dcoln){return false}if(G<A.dcoln){a(this).append(A.cdropleft)}else{a(this).append(A.cdropright)}A.dcolt=G}else{if(!A.colresize){var p=a("th:visible",A.hDiv);var L=-1;for(var J=0,I=0,H=p.length;J<H;J++){if(a(p[J]).css("display")!="none"){if(p[J]==this){L=I;break}I++}}var L=a("th:visible",A.hDiv).index(this);var t=parseInt(a("div:eq("+L+")",A.cDrag).css("left"));var K=parseInt(a(A.nBtn).width())+parseInt(a(A.nBtn).css("borderLeftWidth"));nl=t-K+Math.floor(x.cgwidth/2);a(A.nDiv).hide();a(A.nBtn).hide();a(A.nBtn).css({left:nl,top:A.hDiv.offsetTop}).show();var M=parseInt(a(A.nDiv).width());a(A.nDiv).css({top:A.bDiv.offsetTop});if((nl+M)>a(A.gDiv).width()){a(A.nDiv).css("left",t-M+1)}else{a(A.nDiv).css("left",nl)}if(a(this).hasClass("sorted")){a(A.nBtn).addClass("srtd")}else{a(A.nBtn).removeClass("srtd")}}}},function(){a(this).removeClass("thOver");if(A.colCopy){a(A.cdropleft).remove();a(A.cdropright).remove();A.dcolt=null}})}});A.bDiv.className="bDiv";if(x.bgColor){a(A.bDiv).css("background-color",x.bgColor)}a(v).before(A.bDiv);a(A.bDiv).css({height:(x.height=="auto")?"auto":x.height+"px"}).scroll(function(g){A.scroll()}).append(v);a(A.bDiv).attr("ori_height",(x.height=="auto")?"auto":a(A.bDiv).height());if(x.height=="auto"){a("table",A.bDiv).addClass("autoht")}if(x.url==false||x.url==""){A.addCellProp();A.addRowProp()}var h=a("thead tr:first th:first",A.hDiv).get(0);if(h!=null){A.cDrag.className="cDrag";A.cdpad=0;A.cdpad+=(isNaN(parseInt(a("div",h).css("borderLeftWidth")))?0:parseInt(a("div",h).css("borderLeftWidth")));A.cdpad+=(isNaN(parseInt(a("div",h).css("borderRightWidth")))?0:parseInt(a("div",h).css("borderRightWidth")));A.cdpad+=(isNaN(parseInt(a("div",h).css("paddingLeft")))?0:parseInt(a("div",h).css("paddingLeft")));A.cdpad+=(isNaN(parseInt(a("div",h).css("paddingRight")))?0:parseInt(a("div",h).css("paddingRight")));A.cdpad+=(isNaN(parseInt(a(h).css("borderLeftWidth")))?0:parseInt(a(h).css("borderLeftWidth")));A.cdpad+=(isNaN(parseInt(a(h).css("borderRightWidth")))?0:parseInt(a(h).css("borderRightWidth")));A.cdpad+=(isNaN(parseInt(a(h).css("paddingLeft")))?0:parseInt(a(h).css("paddingLeft")));A.cdpad+=(isNaN(parseInt(a(h).css("paddingRight")))?0:parseInt(a(h).css("paddingRight")));a(A.bDiv).before(A.cDrag);var e=a(A.bDiv).height();var d=a(A.hDiv).height();a(A.cDrag).css({top:-d+"px"});a("thead tr:first th",A.hDiv).each(function(){var p=document.createElement("div");a(A.cDrag).append(p);if(!x.cgwidth){x.cgwidth=a(p).width()}var g=a(this).attr("isch");if(x.dragable){a(p).css({height:e+d});if(!g){a(p).mousedown(function(t){A.dragStart("colresize",t,this)})}A.fixHeight(a(A.gDiv).height());a(p).hover(function(){A.fixHeight();if(!g){a(this).addClass("dragging")}},function(){if(!A.colresize){a(this).removeClass("dragging")}})}});A.rePosDrag()}if(x.striped){a("tbody tr:odd",A.bDiv).addClass("erow")}if(x.resizable&&x.height!="auto"){A.vDiv.className="vGrip";a(A.vDiv).mousedown(function(g){A.dragStart("vresize",g)}).html("<span></span>");a(A.bDiv).after(A.vDiv)}if(x.resizable&&x.width!="auto"&&!x.nohresize){A.rDiv.className="hGrip";a(A.rDiv).mousedown(function(g){A.dragStart("vresize",g,true)}).html("<span></span>").css("height",a(A.gDiv).height());if(a.browser.msie&&a.browser.version<7){a(A.rDiv).hover(function(){a(this).addClass("hgOver")},function(){a(this).removeClass("hgOver")})}a(A.gDiv).append(A.rDiv)}A.doUsePager=function(){if(x.usepager){A.pDiv.className="pDiv";var G="";if(x.userpagefloat=="right"){A.pDiv.innerHTML='<div class="pDiv3"></div>';if(x.newUserpage){G='<div style="float: right;"><div class="pGroup"><div class="pFirst pButton" title="\u8f6c\u5230\u7b2c\u4e00\u9875"><span></span></div><div class="pPrev pButton" title="\u8f6c\u5230\u4e0a\u4e00\u9875"><span></span></div><div class="pNext pButton" title="\u8f6c\u5230\u4e0b\u4e00\u9875"><span></span></div><div class="pLast pButton" title="\u8f6c\u5230\u6700\u540e\u4e00\u9875"><span></span></div></div><div class="pGroup"><span class="pPageStat"></span></div><div class="pGroup"><span class="pcontrol">\u5230\u7b2c <input type="text" size="1" value="1" />\u9875</span></div><div class="pGroup"><div class="pReload pButton pGotoOption" title="\u8df3\u8f6c"><span></span></div></div></div>'}else{G='<div style="float: right;"><div class="pGroup"><div class="pFirst pButton" title="\u8f6c\u5230\u7b2c\u4e00\u9875"><span></span></div><div class="pPrev pButton" title="\u8f6c\u5230\u4e0a\u4e00\u9875"><span></span></div> </div><div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">\u5f53\u524d\u7b2c <input type="text" size="1" value="1" />\u9875\uff0c\u603b\u9875\u6570 <span> 1 </span></span></div><div class="btnseparator"></div><div class="pGroup"> <div class="pNext pButton" title="\u8f6c\u5230\u4e0b\u4e00\u9875"><span></span></div><div class="pLast pButton" title="\u8f6c\u5230\u6700\u540e\u4e00\u9875"><span></span></div></div><div class="btnseparator"></div><div class="pGroup"> <div class="pReload pButton" title="\u5237\u65b0"><span></span></div> </div> <div class="btnseparator"></div><div class="pGroup"><span class="pPageStat"></span></div></div>'}}else{A.pDiv.innerHTML='<div class="pDiv2"></div>';G='<div class="pGroup"><div class="pFirst pButton" title="\u8f6c\u5230\u7b2c\u4e00\u9875"><span></span></div><div class="pPrev pButton" title="\u8f6c\u5230\u4e0a\u4e00\u9875"><span></span></div> </div><div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">\u5f53\u524d\u7b2c <input type="text" size="1" value="1" />\u9875\uff0c\u603b\u9875\u6570 <span> 1 </span></span></div><div class="btnseparator"></div><div class="pGroup"> <div class="pNext pButton" title="\u8f6c\u5230\u4e0b\u4e00\u9875"><span></span></div><div class="pLast pButton" title="\u8f6c\u5230\u6700\u540e\u4e00\u9875"><span></span></div></div><div class="btnseparator"></div><div class="pGroup"> <div class="pReload pButton" title="\u5237\u65b0"><span></span></div> </div> <div class="btnseparator"></div><div class="pGroup"><span class="pPageStat"></span></div>'}a(A.bDiv).after(A.pDiv);a("div",A.pDiv).html(G);a(".pReload",A.pDiv).click(function(){if(x.isSuccessSearch){A.changePage("reload")}});a(".pFirst",A.pDiv).click(function(){if(x.isSuccessSearch){A.changePage("first")}});a(".pPrev",A.pDiv).click(function(){if(x.isSuccessSearch){A.changePage("prev")}});a(".pNext",A.pDiv).click(function(){if(x.isSuccessSearch){A.changePage("next")}});a(".pLast",A.pDiv).click(function(){if(x.isSuccessSearch){A.changePage("last")}});a(".pcontrol input",A.pDiv).keydown(function(J){if(J.keyCode==13&&x.isSuccessSearch){A.changePage("input")}});a(".pGoto",A.pDiv).click(function(J){A.changePage("input")});if(a.browser.msie&&a.browser.version<7){a(".pButton",A.pDiv).hover(function(){a(this).addClass("pBtnOver")},function(){a(this).removeClass("pBtnOver")})}if(x.useRp){var t="";for(var p=0;p<x.rpOptions.length;p++){if(x.rp==x.rpOptions[p]){sel='selected="selected"'}else{sel=""}t+="<option value='"+x.rpOptions[p]+"' "+sel+" >"+x.rpOptions[p]+"&nbsp;&nbsp;</option>"}if(x.rpOptions){if(x.userpagefloat=="right"){a(".pDiv3",A.pDiv).prepend("<div style='float: left;' class='prpOptions'><div class='pGroup'>\u6bcf\u9875 <select name='rp'>"+t+"</select>\u6761</div></div>")}else{a(".pDiv2",A.pDiv).prepend("<div class='pGroup'>\u6bcf\u9875 <select name='rp'>"+t+"</select>\u6761</div> <div class='btnseparator'></div>")}a("select",A.pDiv).change(function(){if(x.onRpChange){x.onRpChange(+this.value)}else{x.newp=1;x.rp=this.value;if(x.isSuccessSearch){A.changePage("change")}}})}}if(x.searchitems){a(".pDiv2",A.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>");a(".pSearch",A.pDiv).click(function(){a(A.sDiv).slideToggle("fast",function(){a(".sDiv:visible input:first",A.gDiv).trigger("focus")})});A.sDiv.className="sDiv";sitems=x.searchitems;var g="";var I="Eq";for(var H=0;H<sitems.length;H++){if(x.qtype==""&&sitems[H].isdefault==true){x.qtype=sitems[H].name;sel='selected="selected"'}else{sel=""}if(sitems[H].operater=="Like"){I="Like"}else{I="Eq"}g+="<option value='"+sitems[H].name+"$"+I+"$"+H+"' "+sel+" >"+sitems[H].display+"&nbsp;&nbsp;</option>"}if(x.qtype==""){x.qtype=sitems[0].name}a(A.sDiv).append("<div class='sDiv2'>\u5feb\u901f\u68c0\u7d22\uff1a<input type='text' size='30' name='q' class='qsbox' /> <select name='qtype'>"+g+"</select> <input type='button' name='qclearbtn' value='\u6e05\u7a7a' /></div>");a("input[name=q],select[name=qtype]",A.sDiv).keydown(function(J){if(J.keyCode==13){A.doSearch()}});a("input[name=qclearbtn]",A.sDiv).click(function(){a("input[name=q]",A.sDiv).val("");x.query="";A.doSearch()});a(A.bDiv).after(A.sDiv)}}};A.doUsePager();a(A.pDiv,A.sDiv).append("<div style='clear:both'></div>");if(x.title){A.mDiv.className="mDiv";A.mDiv.innerHTML='<div class="ftitle" style="float: left;">'+x.title+"</div>";a(A.gDiv).prepend(A.mDiv);if(x.btnSameLineWithTitle){if(x.buttons){A.tDiv.className="tDiv";var D=document.createElement("div");D.className="tDiv3";D.style.fontWeight="normal";D.style.padding="1px";D.style.marginTop="2px";if(x.btnLocation=="right"){a(D).css("float","right")}for(i=0;i<x.buttons.length;i++){var o=x.buttons[i];if(!o.separator){var z=document.createElement("div");z.className="fbutton";if(o.displayname&&o.displayname!=""){z.innerHTML="<div><span style='padding-top: 3px;'>"+o.displayname+"</span></div>"}else{if(a.browser.msie&&a.browser.version==7){z.innerHTML="<div><span style='padding-top: 5px;'></span></div>"}else{z.innerHTML="<div><span style='padding-top: 16px;'></span></div>"}}z.style.padding="0";z.disabled=o.disabled;if(o.title){z.title=o.title}if(o.bclass){a("span",z).addClass(o.bclass).css({paddingLeft:20})}z.name=o.name;z.id=o.id;z.onpress=o.onpress;if(o.disabledClass){z.disabledClass=o.disabledClass}if(o.onpress){a(z).bind("click",function(){this.onpress(this.name,A.gDiv)})}if(o.boverclass){a(z).attr("overClass",o.boverclass);a(z).attr("commonClass",o.bclass);(function(g){a(g).hover(function(){if(a("span",g).hasClass(a(g).attr("commonClass"))){a("span",g).removeClass(a(g).attr("commonClass"));a("span",g).addClass(a(g).attr("overClass"))}},function(){if(a("span",g).hasClass(a(g).attr("overClass"))){a("span",g).removeClass(a(g).attr("overClass"));a("span",g).addClass(a(g).attr("commonClass"))}})})(z)}a(D).append(z);z.style.padding="1";if(a.browser.msie&&a.browser.version<7){a(z).hover(function(){a(this).addClass("fbOver")},function(){a(this).removeClass("fbOver")})}if(o.disabled){if(!a.browser.msie){a(z).css("color","grey")}if(o.disabledClass){jQuery("span",z).addClass(o.disabledClass)}a(z).unbind("click")}}else{a(D).append("<div class='btnseparator' style='padding: 0;'></div>")}}a(A.mDiv).append(D);a(A.mDiv).append("<div style='clear:both'></div>")}}if(x.showTableToggleBtn){if(x.btnSameLineWithTitle){if(a.browser.msie&&a.browser.version==6){a(D).css("margin-right","10px")}else{a(D).css("margin-right","20px")}}a(A.mDiv).append('<div class="ptogtitle" title="Minimize/Maximize Table"><span></span></div>');a("div.ptogtitle",A.mDiv).click(function(){a(A.gDiv).toggleClass("hideBody");a(this).toggleClass("vsble")})}A.rePosDrag()}A.cdropleft=document.createElement("span");A.cdropright=document.createElement("span");var k=a("<div/>");k.addClass("loading");a(A.block).append(k);var C=a(A.bDiv).height();var E=A.bDiv.offsetTop;a(A.block).css({width:A.bDiv.style.width,height:C,position:"relative",marginBottom:(C*-1),zIndex:1,top:E,left:"0px"});a(A.block).fadeTo(0,x.blockOpacity);if(a("th",A.hDiv).length){A.nDiv.className="nDiv";A.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>";a(A.nDiv).css({marginBottom:(C*-1),display:"none",top:E}).noSelect();var n=0;a("th div",A.hDiv).each(function(){var p=a("th[axis='col"+n+"']",A.hDiv)[0];if(p==null){return}var t=a("input[type='checkbox']",this).filter(function(){return a(this).hasClass("noborder")});if(t.length>0){t[0].onclick=A.checkAllOrNot;return}if(p.toggle==false||this.innerHTML==""){n++;return}var g='checked="checked"';if(p.style.display=="none"){g=""}a("tbody",A.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" '+g+' class="togCol noborder" value="'+n+'" /></td><td class="ndcol2">'+this.innerText+"</td></tr>");n++});if(a.browser.msie&&a.browser.version<7){a("tr",A.nDiv).hover(function(){a(this).addClass("ndcolover")},function(){a(this).removeClass("ndcolover")})}a("td.ndcol2",A.nDiv).click(function(){if(a("input:checked",A.nDiv).length<x.minColToggle&&a(this).prev().find("input")[0].checked){return false}return A.toggleCol(a(this).prev().find("input").val())});a("input.togCol",A.nDiv).click(function(){if(a("input:checked",A.nDiv).length<x.minColToggle&&this.checked==false){return false}a(this).parent().next().trigger("click")});a(A.gDiv).prepend(A.nDiv);a(A.nBtn).addClass("nBtn").html("<div></div>").click(function(){a(A.nDiv).toggle();return true});if(x.showToggleBtn){a(A.gDiv).prepend(A.nBtn)}}a(A.iDiv).addClass("iDiv").css({display:"none"});a(A.bDiv).append(A.iDiv);a(A.bDiv).hover(function(){a(A.nDiv).hide();a(A.nBtn).hide();a(A.eDiv).hide()},function(){if(A.multisel){A.multisel=false}});a(A.gDiv).hover(function(){},function(){a(A.nDiv).hide();a(A.nBtn).hide();a(A.eDiv).hide()});a(document).mousemove(function(g){A.dragMove(g)}).mouseup(function(g){A.dragEnd()}).hover(function(){},function(){A.dragEnd()});if(a.browser.msie&&a.browser.version<7){a(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",A.gDiv).css({width:"100%"});a(A.gDiv).addClass("ie6");if(x.width!="auto"){a(A.gDiv).addClass("ie6fullwidthbug")}}A.rePosDrag();A.fixHeight();v.p=x;v.grid=A;if(x.autoload){x.isSuccessSearch=true;A.populate()}else{a(A.bDiv).addClass("noData")}A.xDiv=document.createElement("div");a(A.xDiv).css({width:"1px",height:"1px",left:a("#"+x.container_id).find(".hDivBox").width()+"px",position:"absolute"});a(A.xDiv).attr("id",x.container_id+"_xDiv");a(A.xDiv).append(" ");a(A.xDiv).appendTo(a(A.bDiv));A.doSortClass();return v};var b=false;a(document).ready(function(){b=true});a.fn.flexigrid=function(c){return this.each(function(){if(!b){a(this).hide();var d=this;a(document).ready(function(){a.addFlex(d,c)})}else{a.addFlex(this,c)}})};a.fn.noSelect=function(c){if(c==null){prevent=true}else{prevent=c}if(prevent){return this.each(function(){if(a.browser.msie||a.browser.safari){a(this).bind("selectstart",function(){return false})}else{if(a.browser.mozilla){a(this).css("MozUserSelect","none");a("body").trigger("focus")}else{if(a.browser.opera){a(this).bind("mousedown",function(){return false})}else{a(this).attr("unselectable","on")}}}})}else{return this.each(function(){if(a.browser.msie||a.browser.safari){a(this).unbind("selectstart")}else{if(a.browser.mozilla){a(this).css("MozUserSelect","inherit")}else{if(a.browser.opera){a(this).unbind("mousedown")}else{a(this).removeAttr("unselectable","on")}}}})}}})(jQuery);var NLTable=function(g){this.timer=null;String.prototype.replaceAll=function(k,j){return this.replace(new RegExp(k,"gm"),j)};if(g.height){g.isDefaultHeight=false}else{if(g.subIds&&g.subIds.length>0){g.isDefaultHeight=true;var f=0;for(var b=0,a=g.subIds.length;b<a;b++){f+=jQuery("#"+g.subIds[b]).outerHeight()}g.height=jQuery(window).height()-f}else{g.isDefaultHeight=true;g.height=jQuery(window).height()}}g=jQuery.extend({container_id:"",table_id:"",tableData:false,onChangePage:false,height:305,sortname:"id",sortorder:"desc",width:"auto",striped:true,novstripe:false,maskObject:false,minwidth:30,minheight:80,url:false,method:"POST",dataType:"json",errormsg:"\u6570\u636e\u8bf7\u6c42\u5931\u8d25!",usepager:true,nowrap:false,page:1,total:1,useRp:true,rp:10,rpOptions:[10,15,20,25,40,100],title:"\u6570\u636e\u5217\u8868",pagestat:"\u663e\u793a\u8bb0\u5f55\u4ece{from}\u5230{to},\u603b\u6570 {total} \u6761",procmsg:"\u6b63\u5728\u5904\u7406\u6570\u636e\uff0c\u8bf7\u7a0d\u5019 ...",query:"",qtype:"",qop:"Eq",nomsg:"\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u8bb0\u5f55\u5b58\u5728",minColToggle:1,onWindowResize:false,showToggleBtn:false,hideOnSubmit:true,showTableToggleBtn:false,autoload:false,blockOpacity:0.5,onToggleCol:false,onChangeSort:false,onSuccess:false,onSubmit:false,showcheckbox:false,rowhandler:false,clickRowDoCheck:true,onRowSelectedChangeClass:false,rowbinddata:true,extParam:[{}],successResultID:"1",showSuccessMsg:true,showErrorMsg:true,bgClass:false,gridClass:"bbit-grid",disCheckbox:false,dragable:true,isReloadCall:false,sortByStatic:false,isFilter:true,btnLocation:"left",userpagefloat:false,btnSameLineWithTitle:false,newUserpage:false,autoHeight:false,moveTrUnselected:false},g);g._rp=g.rp;g._page=g.page;g._sortname=g.sortname;g._sortorder=g.sortorder;g._query=g.query;g._qtype=g.qtype;g._qop=g.qop;g.resizable=false;var c=26;c+=1;if(g.title){c+=24}if(g.buttons){c+=26}if(g.usepager){c+=31}if(g.height!="auto"){g.height=g.height-c}if(g.height<0){g.height=0}g.table_id=g.container_id+"_table_id";function d(){jQuery("#"+g.container_id).append('<table id="'+g.table_id+'" style="display:none"></table>')}d();var e=jQuery("#"+g.table_id).flexigrid(g);g.oldWidth=jQuery("#"+g.container_id).width();if(g.onWindowResize){var h=this;jQuery(window).resize(function(){window.clearTimeout(h.timer);h.timer=window.setTimeout(function(){var k=g.onWindowResize();if(k.width!=undefined&&k.height!=undefined){var j,m;if(typeof e[0].p.width=="string"&&e[0].p.width.indexOf("%")!=-1){j=jQuery("#"+e[0].p.container_id).width()*parseInt(e[0].p.width)*0.01}else{j=parseInt(e[0].p.width)}if(typeof k.width=="string"&&k.width.indexOf("%")!=-1){m=jQuery("#"+g.container_id).width()*parseInt(k.width)*0.01}else{m=parseInt(k.width)}var l=j!=m;if((e[0].p.width!=k.width||l)||(parseInt(e[0].p.height,10)+c)!=k.height){h.flexResize(k.width,k.height)}}},100)})}else{if(g.subIds){var h=this;jQuery(window).resize(function(){window.clearTimeout(h.timer);h.timer=window.setTimeout(function(){if(g.isDefaultHeight){var k=0;if(g.subIds&&g.subIds.length>0){var o=0;for(var m=0,j=g.subIds.length;m<j;m++){o+=jQuery("#"+g.subIds[m]).outerHeight()}k=jQuery(window).height()-o}else{k=jQuery(window).height()}var n;if(typeof e[0].p.width=="string"&&e[0].p.width.indexOf("%")!=-1){n=jQuery("#"+e[0].p.container_id).width()*e[0].p.width}else{n=parseInt(e[0].p.width)}var l=g.oldWidth!=n;if(l||(parseInt(e[0].p.height,10)+c)!=k){g.oldWidth=l;h.flexResize(g.width,k)}}},100)})}}this.search=this.flexReload=function(j,k,l){return e.each(function(){if(e[0].grid){var m={newp:(l&&l.newp&&l.newp!=""&&l.newp!=null?l.newp:g._page),rp:(g.tableData&&!g.url)?g.rp:g._rp,sortname:(l&&l.sortname&&l.sortname!=""&&l.sortname!=null?l.sortname:g._sortname),sortorder:(l&&l.sortorder&&l.sortorder!=""&&l.sortorder!=null?l.sortorder:g._sortorder),query:(l&&l.query&&l.query!=""&&l.query!=null?l.query:g._query),qtype:(l&&l.qtype&&l.qtype!=""&&l.qtype!=null?l.qtype:g._qtype),qop:(l&&l.qop&&l.qop!=""&&l.qop!=null?l.qop:g._qop),extParam:j?j:[{}]};if(k){m.tableData=k}e[0].grid.freshParam(m);e[0].grid.populate()}})};this.clearAllRows=function(){if(e[0].grid){e[0].grid.clearAllRows()}};this.flexResize=function(j,k){var l={};if(j){l.width=j}if(k){k=parseInt(k,10);l.height=k-c;if(l.height<0){l.height=0}}return e.each(function(){if(e[0].grid){jQuery.extend(e[0].p,l);e[0].grid.reSize()}})};this.flexOptions=function(j){return e.each(function(){if(e[0].grid){jQuery.extend(e[0].p,j)}})};this.getOptions=function(){if(e[0].grid){return e[0].p}return null};this.getCheckedRows=function(){if(e[0].grid){return e[0].grid.getCheckedRows()}return[]};this.getRowData=function(j){if(e[0].grid){return e[0].grid.getRowData(j)}};this.getRowsData=function(){if(e[0].grid){return e[0].grid.getRowsData()}};this.cancelAllSelectState=function(){if(e[0].grid){e[0].grid.cancelAllSelectState()}};this.mask=function(){if(e[0].grid){e[0].grid.doMask("mask")}};this.unmask=function(){if(e[0].grid){e[0].grid.doMask("unmask")}};this.exportByColumns=function(j){if(e[0].grid){return e[0].grid.exportByColumns(j)}return null};this.exportAll=function(j){if(e[0].grid){return e[0].grid.exportAll(j)}return null};this.enabledButton=function(j){if(e[0].grid){e[0].grid.enabledButton(j)}};this.disabledButton=function(j){if(e[0].grid){e[0].grid.disabledButton(j)}};this.flexToggleCol=function(k,j){return e.each(function(){if(e[0].grid){e[0].grid.toggleCol(k,j)}})};this.flexAddData=function(j){return e.each(function(){if(e[0].grid){e[0].grid.addData(j)}})};this.stopPropagation=function(j){if(e[0].grid){e[0].grid.stopPropagation(j)}};this.addRowData=function(j){if(e[0].grid){return e[0].grid.addRowData(j)}};this.getSelectIndex=function(j){if(e[0].grid){return e[0].grid.getSelectIndex(j)}};this.deleteRowData=function(j){if(e[0].grid){e[0].grid.deleteRowData(j)}};this.getAllData=function(){if(e[0].grid){return e[0].grid.getAllData()}};this.getChangeData=function(){if(e[0].grid){return e[0].grid.getChangeData()}};this.getRowObject=function(j){if(e[0].grid){return e[0].grid.getRowObject(j)}};this.setRowOrColumnCol=function(j){if(e[0].grid){return e[0].grid.setRowOrColumnCol(j)}};this.clearRowOrColumnCol=function(j){if(e[0].grid){return e[0].grid.clearRowOrColumnCol(j)}};this.getNewRows=function(){if(e[0].grid){return e[0].grid.getNewRows()}};this.updateRowData=function(j){if(e[0].grid){return e[0].grid.updateRowData(j)}};this.getUnselectRowsData=function(){if(e[0].grid){return e[0].grid.getUnselectRowsData()}};this.fresh=function(j){if(e[0].grid){if(!j){j={}}j.fnName="fresh";if(j.isCallOnChangePage!=undefined&&(j.isCallOnChangePage==false||(typeof j.isCallOnChangePage==String&&j.isCallOnChangePage.toUpperCase()=="false".toUpperCase()))){j.isCallOnChangePage=false}else{j.isCallOnChangePage=true}e[0].grid.changePage("reload",j)}};this.checkRowsByKeyColumn=function(j){if(e[0].grid){e[0].grid.checkRowsByKeyColumn(j)}};this.uncheckRowsByKeyColumn=function(j){if(e[0].grid){e[0].grid.uncheckRowsByKeyColumn(j)}};this.flexTitle=function(j){if(e[0].grid){e[0].grid.flexTitle(j)}};this.adjustOrder=function(j){if(e[0].grid){e[0].grid.adjustOrder(j)}};this.checkAll=function(j){if(e[0].grid){e[0].grid.checkAll(j)}}};
