(function(a){a.addTreeFlex=function(q,r){if(q.grid){return false}a(q).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("width");var v={hset:{},rePosDrag:function(){var p=0-this.hDiv.scrollLeft;if(this.hDiv.scrollLeft>0){p-=Math.floor(r.cgwidth/2)}a(v.cDrag).css({top:v.hDiv.offsetTop+1});var g=this.cdpad;a("div",v.cDrag).hide();a("thead tr:first th:visible",this.hDiv).each(function(){if(a(this).css("display")=="none"){return}var C=a("thead tr:first th:visible",v.hDiv).index(this);var B=parseInt(a("div",this).width());var t=B;if(p==0){p-=Math.floor(r.cgwidth/2)}B=B+p+g;a("div:eq("+C+")",v.cDrag).css({left:B+"px"}).show();p=B})},fixHeight:function(p){p=false;if(!p){p=a(v.bDiv).height()}var B=a(this.hDiv).height();a("div",this.cDrag).each(function(){a(this).height(p+B)});var t=parseInt(a(v.nDiv).height());if(t>p){a(v.nDiv).height(p).width(200)}else{a(v.nDiv).height("auto").width("auto")}a(v.block).css({height:p,marginBottom:(p*-1)});var g=v.bDiv.offsetTop+p;if(r.height!="auto"&&r.resizable){g=v.vDiv.offsetTop}a(v.rDiv).css({height:g})},dragStart:function(C,B,t){if(C=="colresize"){a(v.nDiv).hide();a(v.nBtn).hide();var D=a("div",this.cDrag).index(t);var g=a("th:visible div:eq("+D+")",this.hDiv).width();a(t).addClass("dragging").siblings().hide();this.colresize={startX:B.pageX,ol:parseInt(t.style.left),ow:g,n:D};a("body").css("cursor","col-resize")}else{if(C=="vresize"){var p=false;a("body").css("cursor","row-resize");if(t){p=true;a("body").css("cursor","col-resize")}this.vresize={h:r.height,sy:B.pageY,w:r.width,sx:B.pageX,hgo:p}}else{if(C=="colMove"){a(v.nDiv).hide();a(v.nBtn).hide();this.hset=a(this.hDiv).offset();this.hset.right=this.hset.left+a("table",this.hDiv).width();this.hset.bottom=this.hset.top+a("table",this.hDiv).height();this.dcol=t;this.dcoln=a("th",this.hDiv).index(t);this.colCopy=document.createElement("div");this.colCopy.className="colCopy";this.colCopy.innerHTML=t.innerHTML;if(a.browser.msie){this.colCopy.className="colCopy ie"}a(this.colCopy).css({position:"absolute","float":"left",display:"none",textAlign:t.align});a("body").append(this.colCopy);a(this.cDrag).hide()}}}a("body").noSelect()},reSize:function(){a(this.gDiv).width(r.width);a(this.bDiv).height(r.height)},dragMove:function(C){if(this.colresize){var p=this.colresize.n;var H=C.pageX-this.colresize.startX;var D=this.colresize.ol+H;var B=this.colresize.ow+H;if(B>r.minwidth){a("div:eq("+p+")",this.cDrag).css("left",D);this.colresize.nw=B}}else{if(this.vresize){var I=this.vresize;var F=C.pageY;var H=F-I.sy;if(!r.defwidth){r.defwidth=r.width}if(r.width!="auto"&&!r.nohresize&&I.hgo){var G=C.pageX;var t=G-I.sx;var g=I.w+t;if(g>r.defwidth){this.gDiv.style.width=g+"px";r.width=g}}var E=I.h+H;if((E>r.minheight||r.height<r.minheight)&&!I.hgo){this.bDiv.style.height=E+"px";r.height=E;this.fixHeight(E)}I=null}}},dragEnd:function(){if(this.colresize){var p=this.colresize.n;var g=this.colresize.nw;a("th:visible div:eq("+p+")",this.hDiv).css("width",g);a("tr",this.bDiv).each(function(){a("td:visible div[candrag='true']:eq("+p+")",this).css("width",g)});this.hDiv.scrollLeft=this.bDiv.scrollLeft;a("div:eq("+p+")",this.cDrag).siblings().show();a(".dragging",this.cDrag).removeClass("dragging");this.rePosDrag();this.fixHeight();this.colresize=false}else{if(this.vresize){this.vresize=false}else{if(this.colCopy){a(this.colCopy).remove();if(this.dcolt!=null){a(this.cdropleft).remove();a(this.cdropright).remove();this.rePosDrag()}this.dcol=null;this.hset=null;this.dcoln=null;this.dcolt=null;this.colCopy=null;a(".thMove",this.hDiv).removeClass("thMove");a(this.cDrag).show()}}}a("body").css("cursor","default");a("body").noSelect(false)},toggleCol:function(C,t){var p=a("th[axis='col"+C+"']",this.hDiv)[0];var B=a("thead th",v.hDiv).index(p);var g=a("input[value="+C+"]",v.nDiv)[0];if(t==null){t=p.hide}if(a("input:checked",v.nDiv).length<r.minColToggle&&!t){return false}if(t){p.hide=false;a(p).show();g.checked=true}else{p.hide=true;a(p).hide();g.checked=false}a("tbody tr[id^='"+r.table_id+"_row_']",q).each(function(){var D=a(this).children("td");if(t){a(D[B]).show()}else{a(D[B]).hide()}});this.rePosDrag();if(r.onToggleCol){r.onToggleCol(C,t)}return t},switchCol:function(p,g){a("tbody tr[id^='"+r.table_id+"_row_']",q).each(function(){if(p>g){a("td:eq("+g+")",this).before(a("td:eq("+p+")",this))}else{a("td:eq("+g+")",this).after(a("td:eq("+p+")",this))}});if(p>g){a("tr:eq("+g+")",this.nDiv).before(a("tr:eq("+p+")",this.nDiv))}else{a("tr:eq("+g+")",this.nDiv).after(a("tr:eq("+p+")",this.nDiv))}if(a.browser.msie&&a.browser.version<7){a("tr:eq("+g+") input",this.nDiv)[0].checked=true}this.hDiv.scrollLeft=this.bDiv.scrollLeft},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft;this.rePosDrag()},hideLoading:function(){a(".pReload",this.pDiv).removeClass("loading");if(r.hideOnSubmit){v.doMask("unmask")}if(r.usepager){a(".pPageStat",this.pDiv).html(r.errormsg)}this.loading=false},parseData:function(t){var g=a("thead tr:first th",v.hDiv);var B=a("thead tr:first th div",v.hDiv);var p=[];if(r.dataType=="json"){if(t.rows!=null){a.each(t.rows,function(C,F){if(F.parentId&&F.id){if(F.parentId.toUpperCase()!="NULL"&&F.id!=F.parentId){p.push("<tbody id="+r.table_id+"_tbody_"+F.id+" name="+r.table_id+"_tbody_"+F.parentId+" style='display: none;'>")}else{p.push("<tbody id="+r.table_id+"_tbody_"+F.id+">")}}p.push("<tr id='",r.table_id+"_row_",F.id,"'");if(C%2&&r.striped){p.push(" class='erow'")}if(r.rowbinddata){var D="";for(var C=0;C<F.cell.length;C++){if(typeof(F.cell[C])=="string"){D=D+F.cell[C].replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replaceAll('"',"&quot;")}else{D=D+F.cell[C]}if(C<F.cell.length-1){D=D+"_FG$SP_"}}p.push('chd="'+D+'"')}p.push(">");var E=F.id;a(g).each(function(M){var L="";var R="";var O=r.colModel[M]&&r.colModel[M]["vertical-align"]!=undefined?r.colModel[M]["vertical-align"]:"middle";p.push("<td align='",this.align,"'");var P=a(this).attr("axis").substr(3);if(r.sortname&&r.sortname==a(this).attr("abbr")){R="sorted"}if(this.hide){p.push(" style='display:none; vertical-align:"+O+";")}else{p.push(" style='vertical-align:"+O+";'")}var J=B[M].style.width;var H=[];var I=F.cell[P]||"";if(typeof I=="string"){I=I.replace(/\</g,"&lt;").replace(/\</g,"&lt;").replaceAll('"',"&quot;")}if(P!="-1"){if(r.colModel[P].ct&&r.colModel[P].ct.type=="date"){I=v.parseDateData({data:I,colModel:r.colModel[P]})}}H.push("<div candrag='true' title='"+I+"' style='text-align:",this.align,";width:"+J,";line-height: 16px;");if(r.nowrap==false){H.push("white-space:normal;word-break:break-all;")}if(r.showcheckbox){H.push(" padding:2px 4px 0px 4px; float:left;'>")}else{H.push(" padding:2px 4px 3px 4px; float:left;'>")}if(P=="-1"){H.push("<input type='checkbox' id='",r.table_id,"_chk_",F.id,"' name='",r.table_id,"_chk_",F.parentId,"' class='itemchk' value='",F.id,"'/>");if(R!=""){R+=" chboxtd"}else{R+="chboxtd"}}else{if((r.showcheckbox&&M==1)||M==0){H.push("<a class='a'>");var G=(F.id+"").split("_").length-1;for(var K=0;K<G;K++){H.push("<ins></ins>")}var Q="treegrid_row_link_leaf_pic_div";if(r.linkPicClass&&r.linkPicClass.leafClass){Q+=" "+r.linkPicClass.leafClass}var N=F.parentId&&F.id&&F.parentId.toUpperCase()!="NULL"&&F.hasChild;if(N){Q="treegrid_row_link_plus_close_pic_div";if(r.linkPicClass&&r.linkPicClass.closeClass){Q+=" "+r.linkPicClass.closeClass}}H.push("<ins ",(N?" title='\u5c55\u5f00\u5b50\u6570\u636e' ":"")," id='",r.table_id,"_row_link_div_",F.id,"' class='",Q,"' style='vertical-align:",O,"'></ins>")}H.push(I);H.push("</a>")}H.push("</div>");if(R!=""){p.push(" class='",R,"'")}p.push(">",H.join(""),"</td>")});p.push("</tr>");p.push("</tbody>")})}}else{if(r.dataType=="xml"){i=1;a("rows row",t).each(function(){i++;var D=this;var C=new Array();a("cell",D).each(function(){C.push(a(this).text())});var F=a(this).attr("id");p.push("<tr id='","row",F,"'");if(i%2&&r.striped){p.push(" class='erow'")}if(r.rowbinddata){p.push("chd='",C.join("_FG$SP_"),"'")}p.push(">");var E=F;a(g).each(function(H){p.push("<td align='",this.align,"'");if(this.hide){p.push(" style='display:none;'")}var J="";var L="";var G=a(this).attr("axis").substr(3);if(r.sortname&&r.sortname==a(this).attr("abbr")){J="sorted"}var I=B[H].style.width;var M=[];M.push("<div style='text-align:",this.align,";width:",I,";");if(r.nowrap==false){M.push("white-space:normal")}M.push("'>");if(G=="-1"){M.push("<input type='checkbox' id='",r.table_id,"_chk_",F,"' class='itemchk' value='",F,"'/>");if(J!=""){J+=" chboxtd"}else{J+="chboxtd"}}else{var K=C[G]||"&nbsp;";if(r.rowbinddata){L=C[G]||""}if(r.colModel[G].ct&&r.colModel[G].ct.type=="date"){K=v.parseDateData({data:K,colModel:r.colModel[G]})}M.push(K)}M.push("</div>");if(J!=""){p.push(" class='",J,"'")}p.push(" axis='",L,"'",">",M.join(""),"</td>")});p.push("</tr>")})}}return p},parseDateData:function(t){if(t.colModel.ct&&t.colModel.ct.type=="date"){var g=t.colModel.ct.format;return t.data=v.dateToStr(t.data,g)}else{return typeof(t.data)=="boolean"?t.data+"":t.data}},dateToStr:function(t,D){var C=t;if(t.constructor==Date){t=new Date(t)}else{if(t.constructor==String&&t!=""){t=new Date(Date.parse(t.replace(/-/g,"/")))}else{return""}}if(t=="Invalid Date"&&C.constructor==String){return C}else{if(t=="NaN"&&C.constructor==String){return C}else{if(D==null||D==""){D="yyyy-MM-dd hh:mm:ss"}var E={"Y+":"Y","y+":"y","M+":"M","o+":"o","d+":"d","D+":"D","h+":"h","H+":"H","m+":"m","i+":"i","s+":"s","S+":"S"};var g={Y:t.getFullYear(),y:t.getFullYear(),M:(t.getMonth()<9)?("0"+(1+t.getMonth())):(1+t.getMonth()),o:(1+t.getMonth()),d:(t.getDate()<10)?("0"+t.getDate()):t.getDate(),D:t.getDate(),h:(t.getHours()<10)?("0"+t.getHours()):t.getHours(),H:t.getHours(),m:(t.getMinutes()<10)?("0"+t.getMinutes()):t.getMinutes(),i:t.getMinutes(),s:(t.getSeconds()<10)?("0"+t.getSeconds()):t.getSeconds(),S:t.getSeconds()};var B=D;for(var p in E){if(new RegExp("("+p+")").test(D)){B=B.replace(RegExp.$1,g[E[p]])}}return B}}},adjustOrder:function(Q){var K=a(v.bDiv).find("tbody tr[id^="+r.table_id+"_row_].trSelected");if(K.length){var N=false;if(r.showcheckbox){var t=0;for(var O=0;O<K.length;O++){var L=a(K[O]).children().children().children();if(L.attr("disabled")==false||L.attr("disabled")=="false"){t++}}if(t>1){N=true}}if(!N){if(K!=undefined){var M=K.attr("id").substr(0,K.attr("id").lastIndexOf("_"));var g=K.parent("tbody");var E=g.attr("id");var F=E.substr(0,E.lastIndexOf("_"));var B=E.substr(E.lastIndexOf("_")+1,E.length);if(Q.order=="up"){var P=[];while(B>=0&&P.length==0){B=B-1;P=a(v.bDiv).find("tbody[id="+(F+"_"+B)+"]")}if(P.length==0){alert("\u884c\u6570\u636e\u4e3a\u5f53\u524d\u5c42\u7ea7\u7684\u9876\u7ea7\uff0c\u65e0\u6cd5\u7ee7\u7eed\u5411\u4e0a\u79fb\u52a8");return false}P.before(g);var S=(r.showcheckbox&&P.length>1)?P:this.getChildren(F+"_"+B);if(!r.showcheckbox||(r.showcheckbox&&P.length==1)){for(var O=S.length-1;O>=0;O--){P.after(S[O])}S.push(P[0])}J=(r.showcheckbox&&g.length>1)?g:this.getChildren(F+"_"+(B+1));if(!r.showcheckbox||(r.showcheckbox&&g.length==1)){for(var O=J.length-1;O>=0;O--){g.after(J[O])}J.push(g[0])}var p=g.attr("id");var G=P.attr("id");this.changeChildrenId({oldId:E,newId:G,data:J,tbodyPrefix:F,trPrefix:M});this.changeChildrenId({oldId:G,newId:E,data:S,tbodyPrefix:F,trPrefix:M})}else{if(Q.order=="down"){var H=g.attr("name");var I=a(v.bDiv).find("tbody[id^="+(F+"_")+"]").filter(function(){return a(this).attr("name")==H});var R=[];while(B<=I.length&&R.length==0){B=parseInt(B)+1;R=a(v.bDiv).find("tbody[id="+(F+"_"+B)+"]")}if(R.length==0){alert("\u5f53\u524d\u8282\u70b9\u5904\u4e8e\u5f53\u524d\u5c42\u7ea7\u7684\u6700\u540e\u4e00\u4e2a\u8282\u70b9\uff0c\u65e0\u6cd5\u7ee7\u7eed\u5f80\u4e0b\u79fb");return false}R.after(g);var D=(r.showcheckbox&&R.length>1)?R:this.getChildren(F+"_"+B);if(!r.showcheckbox||(r.showcheckbox&&R.length==1)){for(var O=D.length-1;O>=0;O--){R.after(D[O])}D.push(R[0])}var J=(r.showcheckbox&&g.length>1)?g:this.getChildren(F+"_"+(B+1));if(!r.showcheckbox||(r.showcheckbox&&g.length==1)){for(var O=J.length-1;O>=0;O--){g.after(J[O])}J.push(g[0])}var p=g.attr("id");var C=R.attr("id");this.changeChildrenId({oldId:E,newId:C,data:J,tbodyPrefix:F,trPrefix:M});this.changeChildrenId({oldId:C,newId:E,data:D,tbodyPrefix:F,trPrefix:M})}}}else{alert("\u8bf7\u5148\u9009\u4e2d\u4e00\u884c\u6570\u636e\u8fdb\u884c\u79fb\u52a8")}}else{alert("\u53ea\u80fd\u9488\u5bf9\u4e00\u884c\u6570\u636e\u8fdb\u884c\u79fb\u52a8")}}else{alert("\u53ea\u80fd\u9488\u5bf9\u4e00\u884c\u6570\u636e\u8fdb\u884c\u79fb\u52a8")}},getChildren:function(t){var g=t+"_";var p=a(v.bDiv).find("tbody[id^="+g+"]");return p},changeChildrenId:function(I){var g=I.oldId;for(var B=0;B<I.data.length;B++){var G=a(I.data[B]).attr("id");var D=false;if(G==I.oldId){D=true}var J=G.replace(I.oldId,I.newId);var E=J.substr(0,J.lastIndexOf("_"));var C=r.table_id+"_tbody_";var H=J.substr(C.length,J.length);var p=null;if(r.showcheckbox){p=a(I.data[B]).children("tr").children("td.chboxtd").next().children("div").children("a").find("ins[id^='"+r.table_id+"_row_link_div_']");var t=a(I.data[B]).children("tr").children("td.chboxtd").children("div").find("input[id^='"+r.table_id+"_chk_']");if(t!=undefined){t.attr("id",r.table_id+"_chk_"+H);t.attr("name",r.table_id+"_chk_"+E.substr(C.length,E.length))}}else{p=a(I.data[B]).children("tr").children("td").first().children("div").children("a").find("ins[id^='"+r.table_id+"_row_link_div_']")}if(p!=undefined){p.attr("id",r.table_id+"_row_link_div_"+H)}a(I.data[B]).attr("id",J);var F=I.trPrefix+J.substr(I.tbodyPrefix.length,J.length);a(I.data[B]).children("tr").attr("id",F);if(!D){if(E==undefined){a(I.data[B]).attr("name",I.newId)}else{a(I.data[B]).attr("name",E)}}}this.firePicColumnEvent();if(r.showcheckbox&&r.cbLinked){this.fireLinkRowsChkEvent()}},addData:function(t){if(r.preProcess){t=r.preProcess(t)}a(".pReload",this.pDiv).removeClass("loading");this.loading=false;if(!t){if(r.usepager){a(".pPageStat",this.pDiv).html(r.errormsg)}return false}var g=r.total;if(r.dataType=="xml"){r.total=+a("rows total",t).text()}else{r.total=t.total}if(r.total<0){r.total=g}if(r.total==0){a("tr, a, td, div",q).unbind();a(q).empty();r.pages=1;r.page=1;if(r.usepager){this.buildpager();a(".pPageStat",this.pDiv).html(r.nomsg)}if(r.hideOnSubmit){v.doMask("unmask")}return false}r.pages=Math.ceil(r.total/r.rp);if(r.dataType=="xml"){r.page=+a("rows page",t).text()}else{r.page=t.page}if(r.usepager){this.buildpager()}var p=this.parseData(t);p.unshift("<tbody>");p.push("</tbody>");a(q).html(p.join(""));this.rePosDrag();this.firePicColumnEvent();if(r.showcheckbox&&r.cbLinked){this.fireLinkRowsChkEvent()}this.addRowProp();this.applyEvent();if(r.onSuccess){r.onSuccess()}if(r.hideOnSubmit){v.doMask("unmask")}this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(a.browser.opera){a(q).css("visibility","visible")}if(r.tableData&&!r.url&&!r.onAppendChild&&r.openAll){v.openRows()}},openRows:function(){var g=a("tbody",v.bDiv).filter(function(){return a(this).attr("id")});for(var p=0;p<g.length;p++){var B=a(g[p]).attr("id");var t=r.table_id+"_tbody_";v.openParentRow(B,g[p])}},openParentRow:function(B,t){B=B.substring((r.table_id+"_tbody_").length,B.length);var g=a("#"+r.table_id+"_row_link_div_"+B);if(g.hasClass("treegrid_row_link_plus_close_pic_div")){a(g).removeClass("treegrid_row_link_plus_close_pic_div");if(r.linkPicClass&&r.linkPicClass.closeClass){a(g).removeClass(r.linkPicClass.closeClass)}a(g).addClass("treegrid_row_link_plus_open_pic_div");if(r.linkPicClass&&r.linkPicClass.openClass){a(g).addClass(r.linkPicClass.openClass)}a(g).attr("title","\u9690\u85cf\u5b50\u6570\u636e");var p=a(t).attr("id");p=p.substring((r.table_id+"_tbody_").length,p.length);v.doChildShow(p)}},doChildShow:function(t,p){var g=a("#"+r.table_id+"_row_link_div_"+t);if(!p&&g.hasClass("treegrid_row_link_plus_close_pic_div")){g.removeClass("treegrid_row_link_plus_close_pic_div");if(r.linkPicClass&&r.linkPicClass.closeClass){g.removeClass(r.linkPicClass.closeClass)}g.addClass("treegrid_row_link_plus_open_pic_div");if(r.linkPicClass&&r.linkPicClass.openClass){g.addClass(r.linkPicClass.openClass)}g.attr("title","\u9690\u85cf\u5b50\u6570\u636e")}a("tbody[name$='"+r.table_id+"_tbody_"+t+"']",v.bDiv).each(function(){var B=a(this).attr("id");B=B.substring((r.table_id+"_tbody_").length,B.length);this.style.display="";if(a("#"+r.table_id+"_row_link_div_"+B).hasClass("treegrid_row_link_plus_open_pic_div")){var C=a(this).attr("id");C=C.substring((r.table_id+"_tbody_").length,C.length);v.doChildShow(C,true)}})},doChildHide:function(t,p){var g=a("#"+r.table_id+"_row_link_div_"+t);if(!p&&g.hasClass("treegrid_row_link_plus_open_pic_div")){g.removeClass("treegrid_row_link_plus_open_pic_div");if(r.linkPicClass&&r.linkPicClass.openClass){g.removeClass(r.linkPicClass.openClass)}g.addClass("treegrid_row_link_plus_close_pic_div");if(r.linkPicClass&&r.linkPicClass.closeClass){g.addClass(r.linkPicClass.closeClass)}g.attr("title","\u5c55\u5f00\u5b50\u6570\u636e")}a("tbody[name$='"+r.table_id+"_tbody_"+t+"']",v.bDiv).each(function(){this.style.display="none";var B=a(this).attr("id");B=B.substring((r.table_id+"_tbody_").length,B.length);v.doChildHide(B,true)})},stopPropagation:function(g){if(g&&g.stopPropagation){g.stopPropagation()}else{window.event.cancelBubble=true}},firePicEvent:function(){a(this).click(function(C){var D=a(this).attr("id");D=D.substring((r.table_id+"_row_link_div_").length,D.length);var B=a(this);if(B.hasClass("treegrid_row_link_plus_close_pic_div")){if(r.onAppendChild){var t=a("#"+r.table_id+"_row_"+D);var g=v.getRowData(t[0]);var p={parentId:D,parentData:g[0]};r.onAppendChild.call(this,p)}else{v.doChildShow(D)}}else{if(B.hasClass("treegrid_row_link_plus_open_pic_div")){v.doChildHide(D)}}v.stopPropagation(C)});if(r.picOnMouseover){a(this).hover(function(){if(a(this).hasClass("treegrid_row_link_plus_close_pic_div")){a(this).trigger("click")}},function(){})}},ajaxChildData:function(g){if(!g){return false}if(!g.param){return false}if(r.hideOnSubmit){v.doMask("mask")}if(r.extParam){for(var p=0;p<r.extParam.length;p++){g.param[g.param.length]=r.extParam[p]}}a.ajax({type:r.method,url:r.url,data:g.param,dataType:r.dataType,success:function(B){if(B!=null&&B.error!=null){if(r.onError){r.onError(B);v.hideLoading()}}else{var t={parentId:g.parentId+""};var C=this.changeJsonObject(B,t);if(C){this.appendChild(C[0],t)}}},error:function(t){try{if(r.onError){r.onError(t)}else{alert("\u83b7\u53d6\u6570\u636e\u53d1\u751f\u5f02\u5e38")}v.hideLoading()}catch(B){}}})},fireChkEvent:function(){function g(t,p){if(p){t.parent().parent().parent().addClass("trSelected")}else{t.parent().parent().parent().removeClass("trSelected")}var B=t.attr("id");B=B.substring((r.table_id+"_chk_").length,B.length);a("tbody[name='"+r.table_id+"_tbody_"+B+"']",v.bDiv).each(function(){var C=a(this).children("tr");a(":checkbox.itemchk",this).each(function(){if(this.name==(r.table_id+"_chk_"+B)){this.checked=p;if(this.checked){a(this).attr("disabled","disabled");a(C).attr("trcheckboxDis",this.checked)}else{a(this).attr("disabled","");a(C).removeAttr("trcheckboxDis")}g(a(this),p)}})})}a(this).click(function(){var p=a(this).attr("checked");g(a(this),p)})},firePicColumnEvent:function(){var g=this.firePicEvent;a("tbody tr ins[class^='treegrid_row_link_plus_']",v.bDiv).each(function(p){g.call(this)})},fireLinkRowsChkEvent:function(){var g=this.fireChkEvent;a(":checkbox.itemchk",v.bDiv).each(function(){g.call(this)})},clearAllRows:function(){a(q).empty();if(r.showcheckbox){a("input:first",v.hDiv).removeAttr("checked")}v.doUsePager();r.isSuccessSearch=false},applyEvent:function(C){if(r.colModel){var p,g,t;var B=a("tbody tr",q);if(C&&C.length){B=C}B.each(function(D){p=this;a(r.colModel).each(function(E){if(this.fireEvent){g=a(p).children()[r.showcheckbox?(E+1):E];t=a(g).children()[0];this.fireEvent({tr_object:p,div_object:t,grid:v})}})})}},dealData:function(p){try{var B=p.resultID;var g=p.resultMsg;if(B){if(B==r.successResultID){return true}else{if(r.showErrorMsg){alert(g)}return false}}else{alert(r.errormsg);return false}}catch(t){throw t}},getDataArr:function(F){var E=r.colModel.length;var D,C="",p=new Array(E);for(var B=0;B<E;B++){D=r.colModel[B].name;if(D.indexOf(".")!=-1){var t=D.split(".");C=F[t[0]];for(var g=1;g<t.length;g++){if(C&&C[t[g]]!=undefined&&C[t[g]]!=null){C=C[t[g]]}else{C=""}}}else{C=F[D]}if(typeof(C)=="number"){C=C==0?"0":C}else{C=C?C:""}p[B]=C}return p},changeJsonObject:function(K,D){try{var p;var B=[{}];B[0].total=K.total;B[0].page=K.page;B[0].rows=[];var J,E,F;var I=0;if(B[0].page){I=r.rp*(parseInt(B[0].page)-1);I=I>=0?I:0}function t(O,P){if(O.children){for(var N=0;N<O.children.length;N++){E=O.children[N];if(E){F={id:(P+"_"+N),cell:v.getDataArr(E),parentId:P+"",hasChild:false};if(E.children){F.hasChild=true}B[0].rows.push(F)}t(E,(P+"_"+N))}}}var L=0;if(D.keyValue!=null&&D.noDel!=undefined&&D.noDel){var H=a("tbody[name='"+r.table_id+"_tbody_"+D.parentId+"']",v.bDiv);if(H.length==0){L=0}else{var g=a(H[H.length-1]).attr("id");var C=g.substr((r.table_id+"_tbody_"+D.parentId).length+1,g.length);L=parseInt(C)+1}}else{if(D.keyId&&D.keyValue==null){var H=a("tbody[id^='"+r.table_id+"_tbody_']").filter(function(){return a(this).attr("name")==undefined});if(H.length==0){L=0}else{var g=a(H[H.length-1]).attr("id");var C=g.substr((r.table_id+"_tbody_").length,g.length);L=parseInt(C)+1}}}if(K&&K.resultList){for(var G=0;G<K.resultList.length;G++){J=K.resultList[G];if(J){F={id:((D&&D.parentId)?(D.parentId+"_"+(L+G)):(I+L+G)+""),cell:this.getDataArr(J),parentId:(D.parentId?D.parentId:"null"),hasChild:false};if(J.children){F.parentId=(D&&D.parentId)?D.parentId:(I+L+G)+"";F.hasChild=true}B[0].rows.push(F);t(J,F.id)}}}return B}catch(M){throw M}},freshParam:function(g){a.extend(r,g)},getRowData:function(p){var B=[];var C=null;if(p){C=a(p).attr("chd")}else{if(!r.showcheckbox){var g=a(v.bDiv).find("tbody tr[id^="+r.table_id+"_row_]");for(var t=0;t<g.length;t++){if(a(g[t]).hasClass("trSelected")){C=a(g[t]).attr("chd");break}}}}if(C){B.push({});v.generalObject(B,C,0)}return B},changeSort:function(g){if(this.loading){return true}a(v.nDiv).hide();a(v.nBtn).hide();if(r.sortname==a(g).attr("abbr")){if(r.sortorder=="asc"){r.sortorder="desc"}else{r.sortorder="asc"}}a(g).addClass("sorted").siblings().removeClass("sorted");a(".sdesc",this.hDiv).removeClass("sdesc");a(".sasc",this.hDiv).removeClass("sasc");a("div",g).addClass("s"+r.sortorder);r.sortname=a(g).attr("abbr");if(r.onChangeSort){r.onChangeSort(r.sortname,r.sortorder)}else{this.populate()}},buildpager:function(){a(".pcontrol input",this.pDiv).val(r.page);a(".pcontrol span",this.pDiv).html(r.pages);var p=(parseInt(r.page)-1)*parseInt(r.rp)+1;var g=p+parseInt(r.rp)-1;if(r.total<g){g=r.total}var t=r.pagestat;t=t.replace(/{from}/,p);t=t.replace(/{to}/,g);t=t.replace(/{total}/,r.total);if(r.usepager){a(".pPageStat",this.pDiv).html(t)}},doMask:function(D){var g=v.gDiv;if(r.maskObject){if(typeof(r.maskObject)=="string"){g=document.getElementById(r.maskObject)}else{if(typeof(r.maskObject)=="object"){g=r.maskObject}}}if(!v.maskDiv){v.maskDiv=document.createElement("div");v.maskDiv.setAttribute("id",r.container_id+"_maskDiv");v.maskDiv.className="gBlock";a(v.maskDiv).fadeTo(0,r.blockOpacity);var B="	<iframe style=\"display: block; z-index: -1; filter: alpha(Opacity='0'); left: -1px;		left: expression(((parseInt(document.getElementById('"+r.container_id+"_maskDiv').currentStyle.borderLeftWidth)||0)*-1)+'px'); 		width: expression(document.getElementById('"+r.container_id+"_maskDiv').offsetWidth+'px'); 		position: absolute; top: -1px; 		top: expression(((parseInt(document.getElementById('"+r.container_id+"_maskDiv').currentStyle.borderTopWidth)||0)*-1)+'px'); 		height: expression(document.getElementById('"+r.container_id+"_maskDiv').offsetHeight+'px');\"		tabIndex=-1 src=\"\" frameBorder=0>	</iframe>";a(v.maskDiv).prepend(B)}var C=a(g).height();var I=a(g).width()+2;var E=0;a(v.maskDiv).css({width:I,height:C,position:"absolute",marginBottom:0,zIndex:1});if(!v.maskMsgDiv){v.maskMsgDiv=document.createElement("div");v.maskMsgDiv.className="grid-mask-msg";a(v.maskMsgDiv).html("<div>\u8bf7\u7a0d\u5019...</div>")}if(D=="mask"){if(!v.tmpDiv){v.tmpDiv=document.createElement("div");v.tmpDiv.className=r.gridClass}a(v.tmpDiv).append(v.maskDiv);a(v.tmpDiv).append(v.maskMsgDiv);if(r.maskObject){a(g).prepend(v.tmpDiv)}else{a(this.gDiv).prepend(v.tmpDiv)}var G=Math.round(a(g).height()/2-(a(v.maskMsgDiv).height()-parseInt(a(v.maskMsgDiv).css("padding-top"))-parseInt(a(v.maskMsgDiv).css("padding-bottom")))/2);var p=Math.round(a(g).width()/2-(a(v.maskMsgDiv).width()-parseInt(a(v.maskMsgDiv).css("padding-left"))-parseInt(a(v.maskMsgDiv).css("padding-right")))/2);p=p-4;var F,H;if(r.maskObject){F=a(g).offset().top+G+"px";H=a(g).offset().left+p+"px"}else{F=G+"px";H=p+"px"}a(v.maskMsgDiv).css("top",F);a(v.maskMsgDiv).css("left",H)}else{if(D=="unmask"){a(v.maskMsgDiv).remove();a(v.maskDiv).remove();a(v.tmpDiv).remove()}}},getParentId:function(C){var t=C.keyValue;var G=null;for(var D=0;D<r.colModel.length;D++){if(r.colModel[D].name==C.keyId){var g=a("tbody tr[id^="+r.table_id+"_row_]",v.bDiv);for(var B=0;B<g.length;B++){var F=a(g[B]).children("td");var H=a(F[(r.showcheckbox?D+1:D)]).contents().filter(function(){return this.nodeType==3}).text();if(H==C.keyValue){G=g[B];break}}}}if(G!=null){var p=r.table_id+"_tbody_";var E=a(G).parent("tbody").attr("id");C.parentId=E.substr(p.length,E.length)}return C.parentId},getChildrenLen:function(t){var D=t.keyValue;var g=a("tbody tr[id^="+r.table_id+"_row_]",v.bDiv);var B=r.table_id+"_tbody_";for(var p=0;p<g.length;p++){var C=a(g[p]);if(C.attr("chd").indexOf(D)>-1){parentId=C.parent("tbody").attr("id");t.parentId=parentId.substr(B.length,parentId.length);break}}return t.parentId},appendChild:function(G,C){if(!G){if(r.usepager){a(".pPageStat",this.pDiv).html(r.errormsg)}return false}function g(P){a("tbody[name='"+r.table_id+"_tbody_"+P+"']",v.bDiv).each(function(){a(":checkbox.itemchk",this).each(function(){if(this.name==(r.table_id+"_chk_"+P)){E.call(this);var Q=this.id.substring((r.table_id+"_chk_").length,this.id.length);g(Q)}})})}function N(Q){var P=a("tbody[name='"+r.table_id+"_tbody_"+Q+"']",v.bDiv);if(P.length){a("#"+r.table_id+"_row_link_div_"+Q).removeClass("treegrid_row_link_plus_close_pic_div");if(r.linkPicClass&&r.linkPicClass.closeClass){a("#"+r.table_id+"_row_link_div_"+Q).removeClass(r.linkPicClass.closeClass)}a("#"+r.table_id+"_row_link_div_"+Q).addClass("treegrid_row_link_plus_open_pic_div");if(r.linkPicClass&&r.linkPicClass.openClass){a("#"+r.table_id+"_row_link_div_"+Q).addClass(r.linkPicClass.openClass)}a("#"+r.table_id+"_row_link_div_"+Q).attr("title","\u9690\u85cf\u5b50\u6570\u636e");P.each(function(){this.style.display="";a("tr ins[class^='treegrid_row_link_plus_']",this).each(function(){if(!a(this).data("events")||!a(this).data("events")["click"]){B.call(this);var R=this.id.substring((r.table_id+"_row_link_div_").length,this.id.length);N(R)}})})}}function L(P){a("tbody[name='"+r.table_id+"_tbody_"+P+"']",v.bDiv).each(function(){var Q=this.id.substring((r.table_id+"_tbody_").length,this.id.length);L(Q);a(this).remove()})}function D(Q){var P=a("tbody[name='"+r.table_id+"_tbody_"+Q+"']",v.bDiv);P.each(function(){var R=a("tr",this)[0];v.rowProp.call(R);var S=this.id.substring((r.table_id+"_tbody_").length,this.id.length);D(S)})}function K(R){var P=null;var Q=a("tbody[name='"+R+"']",v.bDiv);if(Q.length>0){P=K(a(Q[Q.length-1]).attr("id"))}else{P=a("tbody[id='"+R+"']",v.bDiv)}return P}if(C.noDel!=undefined&&!C.noDel){L(C.parentId)}var H=this.parseData(G);var F=a("#"+r.table_id+"_tbody_"+C.parentId);var J=a(H.join(""));if(C.parentId){if(C.noDel!=undefined&&C.noDel){var O=a("tbody[name='"+r.table_id+"_tbody_"+C.parentId+"']",v.bDiv);if(O.length>0){var t=K(a(O[O.length-1]).attr("id"));J.insertAfter(t)}else{J.insertAfter(F)}}else{J.insertAfter(F)}D(C.parentId)}else{var I=a("tbody[id^='"+r.table_id+"_tbody_']");if(I.length==0){G.total=I.length+1;G.page=r.page;v.addData(G)}else{J.insertAfter(I[I.length-1]);if(!a(J).data("events")||!a(J).data("events")["click"]){this.firePicEvent.call(a("tr ins[class^='treegrid_row_link_plus_']",J)[0]);var p=J.attr("id").substring((r.table_id+"_row_link_div_").length,J.attr("id").length);N(p)}a(J).each(function(){a(":checkbox.itemchk",this).each(function(){v.fireChkEvent.call(this)})})}}this.applyEvent(a("tr",J));var B=this.firePicEvent;var E=this.fireChkEvent;N(C.parentId);if(r.showcheckbox&&r.cbLinked){g(C.parentId);var M=false;if(a("tbody tr[id="+r.table_id+"_row_"+C.parentId+"]",v.bDiv).length>0){M=a("tbody tr[id="+r.table_id+"_row_"+C.parentId+"]",v.bDiv).children("td.chboxtd").children().children("input.itemchk")[0].checked}a("tbody tr[id^="+r.table_id+"_row_"+C.parentId+"_]",v.bDiv).each(function(){a("input.itemchk",this).each(function(){var P=a(this).parent().parent().parent();if(M){this.checked=M;P.addClass("trSelected");a(this).attr("disabled","disabled")}else{this.checked=M;P.removeClass("trSelected");a(this).attr("disabled","")}if(r.onrowchecked){r.onrowchecked.call(this)}v.freshCheckboxState()})})}},populate:function(){if(this.loading){return true}if(r.onSubmit){var p=r.onSubmit();if(!p){return false}}this.loading=true;if(r.usepager){a(".pPageStat",this.pDiv).html(r.procmsg);a(".pReload",this.pDiv).addClass("loading")}a(v.block).css({top:v.bDiv.offsetTop});if(r.hideOnSubmit){v.doMask("mask")}if(a.browser.opera){a(q).css("visibility","hidden")}if(!r.newp){r.newp=1}if(r.page>r.pages){r.page=r.pages}var B=[{name:"pageNumber",value:r.newp},{name:"pageSize",value:r.usepager?r.rp:1000},{name:"sortname",value:r.sortname},{name:"sortorder",value:r.sortorder},{name:"query",value:r.query},{name:"qtype",value:r.qtype},{name:"qop",value:r.qop}];if(r.extParam){for(var t=0;t<r.extParam.length;t++){B[B.length]=r.extParam[t]}}function g(){if(v.dealData(r.tableData)){v.addData(v.changeJsonObject(r.tableData,{pageNumber:r.newp,pageSize:r.rp})[0]);r.isSuccessSearch=true}else{v.hideLoading()}}if(r.tableData&&!r.url){g()}else{if(r.url){a.ajax({type:r.method,url:r.url,data:B,dataType:r.dataType,success:function(C){if(C!=null&&C.error!=null){if(r.onError){r.onError(C);v.hideLoading()}}else{r.tableData=C;g()}},error:function(C){try{if(r.onError){r.onError(C)}else{alert("\u83b7\u53d6\u6570\u636e\u53d1\u751f\u5f02\u5e38")}v.hideLoading()}catch(D){}}})}}},doSearch:function(){var g=a("select[name=qtype]",v.sDiv).val();var p=g.split("$");var t=-1;if(p.length!=3){r.qop="Eq";r.qtype=g}else{r.qop=p[1];r.qtype=p[0];t=parseInt(p[2])}r.query=a("input[name=q]",v.sDiv).val();if(r.query!=""&&r.searchitems&&t>=0&&r.searchitems.length>t){if(r.searchitems[t].reg){if(!r.searchitems[t].reg.test(r.query)){alert("\u4f60\u7684\u8f93\u5165\u4e0d\u7b26\u5408\u8981\u6c42!");return}}}r.newp=1;this.populate()},changePage:function(p){if(this.loading){return true}switch(p){case"first":r.newp=1;break;case"prev":if(r.page>1){r.newp=parseInt(r.page)-1}break;case"next":if(r.page<r.pages){r.newp=parseInt(r.page)+1}else{r.newp=r.pages}break;case"last":r.newp=r.pages;break;case"input":var g=parseInt(a(".pcontrol input",this.pDiv).val());if(isNaN(g)){g=1}if(g<1){g=1}else{if(g>r.pages){g=r.pages}}a(".pcontrol input",this.pDiv).val(g);r.newp=g;break}if(r.newp==r.page){if(p!="reload"&&p!="change"){return false}}if(r.onChangePage){r.onChangePage(r.newp,r.rp)}else{this.populate()}},cellProp:function(D,C,B){var t=document.createElement("div");if(B!=null){if(r.sortname==a(B).attr("abbr")&&r.sortname){this.className="sorted"}a(t).css({textAlign:B.align,width:a("div:first",B)[0].style.width});if(B.hide){a(this).css("display","none")}}if(r.nowrap==false){a(t).css("white-space","normal")}if(this.innerHTML==""){this.innerHTML="&nbsp;"}t.innerHTML=this.innerHTML;var p=a(this).parent()[0];var g=false;if(p.id){g=p.id.substr(3)}if(B!=null){if(B.format){B.format(t,g)}}a("input.itemchk",t).each(function(){a(this).bind("click",function(){if(this.checked){a(C).addClass("trSelected")}else{a(C).removeClass("trSelected")}if(r.onrowchecked){r.onrowchecked.call(this)}})});a(this).empty().append(t).removeAttr("width")},addCellProp:function(){var g=this.cellProp;a("tbody tr[id^="+r.table_id+"_row_] td",v.bDiv).each(function(){var B=a("td",a(this).parent()).index(this);var p=a("th:eq("+B+")",v.hDiv).get(0);var t=a(this).parent();g.call(this,B,t,p)});g=null},getRowsData:function(){var p=a(":checkbox:checked.itemchk",v.bDiv);var g=p.length;var B=[];for(var t=0;t<g;t++){B.push({})}var C=null;for(var t=0;t<g;t++){C=a(p[t]).parent().parent().parent().attr("chd");v.generalObject(B,C,t)}return B},openRow:function(E){if(E&&E.identityColumn&&E.value){var J=E.identityColumn;var I=E.value;var p=a("tbody tr[id^="+r.table_id+"_row_]",v.bDiv);for(var F=0,G=p.length;F<G;F++){var D=v.getRowData(p[F]);if(D[0][J]&&D[0][J]==I){var H=true;var K,g,C;var B=a(p[F]).parent().attr("name");var t=a("#"+B,v.bDiv);if(B){g=B.substr((r.table_id+"_tbody_").length,B.length);C=a("#"+r.table_id+"_row_link_div_"+g);if(C.hasClass("treegrid_row_link_plus_close_pic_div")){H=false}}if(H){K=a(p[F]).attr("id");g=K.substr((r.table_id+"_row_").length,K.length);v.doChildShow(g)}}}}},closeRow:function(E){if(E&&E.identityColumn&&E.value){var J=E.identityColumn;var I=E.value;var p=a("tbody tr[id^="+r.table_id+"_row_]",v.bDiv);for(var F=0,G=p.length;F<G;F++){var D=v.getRowData(p[F]);if(D[0][J]&&D[0][J]==I){var H=true;var K,g,C;var B=a(p[F]).parent().attr("name");var t=a("#"+B,v.bDiv);if(B){g=B.substr((r.table_id+"_tbody_").length,B.length);C=a("#"+r.table_id+"_row_link_div_"+g);if(C.hasClass("treegrid_row_link_plus_close_pic_div")){H=false}}if(H){K=a(p[F]).attr("id");g=K.substr((r.table_id+"_row_").length,K.length);v.doChildHide(g)}}}}},deleteRow:function(D){var g=[];if(D&&D.rowNum){var E=D.rowNum.split(",");str="";for(var B=0;B<E.length;B++){if(!isNaN(parseInt(E[B]))){if(str.indexOf(E[B])==-1){str=str+E[B]+";";g[g.length]=a("tbody tr[id^="+r.table_id+"_row_]:eq("+(parseInt(E[B]))+")",v.bDiv)}}}for(var B=0;B<g.length;B++){g[B].remove()}}else{if(r.showcheckbox){g=a(":checkbox:checked.itemchk",v.bDiv).parent().parent().parent().filter(function(){return a(this).parent().attr("noDel")!=true||a(this).parent().attr("noDel")!="true"})}else{function t(H){var G=a("tbody[name^="+H+"]",v.bDiv).filter(function(){return a(this).attr("noDel")!=true||a(this).attr("noDel")!="true"});for(var F=0;F<G.length;F++){a(G[F]).remove();t(a(G[F]).attr("id"))}}var p=a("tbody tr[id^="+r.table_id+"_row_].trSelected",v.bDiv).filter(function(){return a(this).parent().attr("noDel")!=true||a(this).parent().attr("noDel")!="true"});if(p.length>0){var C=p.parent().attr("id");t(C);p.remove()}}if(g&&g.length>0){g.each(function(){if(D.isNotDelTopRow){if(a(this).parent().attr("name")!=undefined){a(this).parent().remove()}}else{a(this).parent().remove()}})}}v.freshCheckboxState()},getAllData:function(E){if(!E.isList){var t=a("tbody tr[id^="+r.table_id+"_row_]",v.bDiv).filter(function(){return a(this).parent("tbody").attr("name")==undefined});var g=t.length;var C=[];for(var B=0;B<g;B++){C.push({})}function p(H,J){var G=a("tbody[name='"+J+"']",v.bDiv);if(G.length>0){H.children=[];var F=G.length;for(var I=0;I<F;I++){H.children.push({})}for(var I=0;I<F;I++){var K=a(G[I]).children("tr");var L=K.attr("chd");v.generalObject(H.children,L,I);p(H.children[I],a(G[I]).attr("id"))}}else{H.children=null}}for(var B=0;B<g;B++){var D=a(t[B]).attr("chd");v.generalObject(C,D,B);p(C[B],a(t[B]).parent("tbody").attr("id"))}return C}else{var t=a("tbody tr[id^="+r.table_id+"_row_]",v.bDiv);var g=t.length;var C=[];for(var B=0;B<g;B++){C.push({})}for(var B=0;B<g;B++){var D=a(t[B]).attr("chd");v.generalObject(C,D,B)}return C}},enabledButton:function(t){if(t.id){var g=document.getElementById(t.id);if(g){a(g).removeAttr("disabled");if(!a.browser.msie){a(g).css("color","rgb(0,0,0)")}if(g.disabledClass){jQuery("span",g).removeClass(g.disabledClass)}if(!(a(g).data("events")&&a(g).data("events")["click"])){a(g).bind("click",function(){this.onpress(this.name,v.gDiv)})}}}},disabledButton:function(t){if(t.id){var g=document.getElementById(t.id);if(g){a(g).attr("disabled","disabled");if(!a.browser.msie){a(g).css("color","grey")}if(g.disabledClass){jQuery("span",g).addClass(g.disabledClass)}}}if(a(g).data("events")&&a(g).data("events")["click"]){a(g).unbind("click")}},updateRowData:function(t){var E=[];if(t.identifyColumn){for(var G=0;G<r.colModel.length;G++){if(r.colModel[G].name==t.identifyColumn){var g=a("tbody tr[id^='"+r.table_id+"_row_']",v.bDiv);for(var F=0;F<g.length;F++){var I=a(g[F]).children("td");var L=a("div",a(I[(r.showcheckbox?G+1:G)])).text();if(L==t.identifyColumnValue){E.push(g[F]);break}}break}}}if(E.length){if(t.data){for(var D=0;D<E.length;D++){var N="";var I=a(E[D]).children("td");for(var G=0;G<r.colModel.length;G++){var p=r.colModel[G].name;var K;if(p.indexOf(".")!=-1){var J=p.split(".");K=t.data;for(var F=0;F<J.length;F++){if(K[J[F]]!=undefined&&K[J[F]]!=null){K=v.parseDateData({data:K[J[F]],colModel:r.colModel[G]})}else{K=""}}}else{if(t.data[p]!=undefined&&t.data[p]!=null){K=v.parseDateData({data:t.data[p],colModel:r.colModel[G]})}else{K=""}}K=K?K:"";if(typeof(K)=="string"){N=N+K.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replaceAll('"',"&quot;")}else{N=N+K}if(G<r.colModel.length-1){N=N+"_FG$SP_"}var B=a("div",I[(r.showcheckbox?G+1:G)]);if((r.showcheckbox&&G==1)||G==0){var M=B.text();var H=B.html();H=H.substr(0,H.indexOf(M));B.html(H);function C(P){var O=a("tbody[name='"+r.table_id+"_tbody_"+P+"']",v.bDiv);O.each(function(){var Q=a("tr",this)[0];v.rowProp.call(Q);var R=this.id.substring((r.table_id+"_tbody_").length,this.id.length);C(R)})}C()}else{B.text(K)}}a(E[D]).attr("chd",N);for(var G=0;G<r.colModel.length;G++){if(r.colModel[G]&&r.colModel[G].fireEvent){r.colModel[G].fireEvent({tr_object:a(E[D]),div_object:r.showcheckbox?a("div",I[G+1])[0]:a("div",I[G])[0],grid:v})}}}}}},freshCheckboxState:function(){if(a("tbody tr",v.bDiv).length>0&&a("tbody tr input[type='checkbox']:not(:disabled):not(:checked).itemchk",v.bDiv).length==0){if(a("tbody tr input[type='checkbox']:not(:disabled)",v.bDiv).length==0){v.doUncheck()}else{v.doCheck()}}else{v.doUncheck()}},doUncheck:function(){a("th div input[type='checkbox']",v.hDiv).filter(function(){return a(this).hasClass("noborder")}).attr("checked",false)},doCheck:function(){a("th div input[type='checkbox']",v.hDiv).filter(function(){return a(this).hasClass("noborder")}).attr("checked",true)},cancelAllSelectState:function(){a("tbody tr[id^="+r.table_id+"_row_]",v.bDiv).each(function(){if(a(this).attr("class").indexOf("trSelected")!=-1){a(this).removeClass("trSelected");if(r.showcheckbox){a("input:checkbox",this).attr("checked",false)}}});v.freshCheckboxState()},generalObject:function(g,G,E){var D=G.split("_FG$SP_");var p=r.colModel;var t="",B="";for(var C=0;C<p.length;C++){t=p[C].name;B=D[C];F({col_name:t,row_object:g[E],col_value:B})}function F(M){var J=M.col_name;var H=J.indexOf(".");var I=M.row_object;var N=M.col_value;if(H==-1){I[J]=N}else{var L=J.substr(0,H);var K=J.substr(H+1,J.length);if(!I[L]){I[L]={}}F({col_name:K,row_object:I[L],col_value:N})}}},getCellDim:function(t){var E=parseInt(a(t).height());var g=parseInt(a(t).parent().height());var C=parseInt(t.style.width);var G=parseInt(a(t).parent().width());var D=t.offsetParent.offsetTop;var p=t.offsetParent.offsetLeft;var F=parseInt(a(t).css("paddingLeft"));var B=parseInt(a(t).css("paddingTop"));return{ht:E,wt:C,top:D,left:p,pdl:F,pdt:B,pht:g,pwt:G}},rowProp:function(){if(r.rowhandler){r.rowhandler(this)}if(a.browser.msie&&a.browser.version<7){a(this).hover(function(){a(this).addClass("trOver")},function(){a(this).removeClass("trOver")})}if(!r.showcheckbox){a(this).click(function(){if(a(this).attr("class").indexOf("trSelected")==-1){a(v.bDiv).find("tbody tr[id^="+r.table_id+"_row_]").each(function(){a(this).removeClass("trSelected")});a(this).addClass("trSelected")}else{if(r.onRowSelectedChangeClass){a(this).removeClass("trSelected")}}})}},circleParent:function(D){var C=a("tbody[id='"+D+"']",v.bDiv);if(C&&C.length>=1){var t=a("tbody[name='"+D+"']",v.bDiv);var B=0;for(var p=0;p<t.length;p++){var g=a("input:checkbox.itemchk",a(t[p]));if(g[0]&&g[0].checked&&(a(t[p]).attr("noDel")==undefined||a(t[p]).attr("noDel")==false||a(t[p]).attr("noDel")=="false")){B++}}if(B==t.length){C.attr("noDel","false")}else{C.attr("noDel","true")}v.circleParent(C.attr("name"))}},addRowProp:function(){var g=this.rowProp;a("tbody tr[id^="+r.table_id+"_row_]",v.bDiv).each(function(){a("input.itemchk",this).each(function(){var p=a(this).parent().parent().parent();a(this).click(function(){if(this.checked){p.addClass("trSelected")}else{p.removeClass("trSelected")}v.circleParent(a(this).parent().parent().parent().parent().attr("name"));if(r.onrowchecked){r.onrowchecked.call(this)}v.freshCheckboxState()})});g.call(this)});g=null},checkAllOrNot:function(g){var p=a(this).attr("checked");a("tbody tr[id^="+r.table_id+"_row_]",v.bDiv).each(function(){if(p){a(this).addClass("trSelected")}else{a(this).removeClass("trSelected")}});a("input.itemchk",v.bDiv).each(function(){this.checked=p;if(!p){a(this).attr("disabled","")}if(r.onrowchecked){r.onrowchecked.call(this)}})},pager:0};if(r.colModel){w=document.createElement("thead");tr=document.createElement("tr");if(r.showcheckbox){var c=jQuery("<th/>");var n=jQuery('<input type="checkbox"/>');n.addClass("noborder");c.addClass("cth").attr({axis:"col-1",width:"22",isch:true}).append(n);a(tr).append(c)}for(i=0;i<r.colModel.length;i++){var m=r.colModel[i];var h=document.createElement("th");h.innerHTML=m.display;if(m.name&&m.sortable){a(h).attr("abbr",m.name)}a(h).attr("axis","col"+i);if(m.align){h.align=m.align}if(m.width){a(h).attr("width",m.width)}if(m.hide){h.hide=true}if(m.toggle!=undefined){h.toggle=m.toggle}if(m.format){h.format=m.format}if(m.isKey){h.isKey=m.isKey}if(m.title_align){h.title_align=m.title_align}else{h.title_align="center"}if(m.ct){h.ct=m.ct}else{h.ct=false}a(tr).append(h)}a(w).append(tr);a(q).prepend(w)}v.gDiv=document.createElement("div");v.mDiv=document.createElement("div");v.hDiv=document.createElement("div");v.bDiv=document.createElement("div");v.vDiv=document.createElement("div");v.rDiv=document.createElement("div");v.cDrag=document.createElement("div");v.block=document.createElement("div");v.nDiv=document.createElement("div");v.nBtn=document.createElement("div");v.iDiv=document.createElement("div");v.tDiv=document.createElement("div");v.sDiv=document.createElement("div");if(r.usepager){v.pDiv=document.createElement("div")}v.hTable=document.createElement("table");v.gDiv.className=r.gridClass;a(v.gDiv).css({position:"relative"});if(r.width!="auto"){v.gDiv.style.width=r.width+((r.width+"").indexOf("%")?"":"px")}if(a.browser.msie){a(v.gDiv).addClass("ie")}if(r.novstripe){a(v.gDiv).addClass("novstripe")}a(q).before(v.gDiv);a(v.gDiv).append(q);if(r.buttons){v.tDiv.className="tDiv";var y=document.createElement("div");y.className="tDiv2";for(i=0;i<r.buttons.length;i++){var l=r.buttons[i];if(!l.separator){var u=document.createElement("div");u.className="fbutton";u.innerHTML="<div><span style='padding-top: 3px;'>"+l.displayname+"</span></div>";u.disabled=l.disabled;if(l.title){u.title=l.title}if(l.bclass){a("span",u).addClass(l.bclass).css({paddingLeft:20})}u.onpress=l.onpress;u.name=l.name;u.id=l.id;if(l.onpress){a(u).click(function(){this.onpress()})}a(y).append(u);if(a.browser.msie&&a.browser.version<7){a(u).hover(function(){a(this).addClass("fbOver")},function(){a(this).removeClass("fbOver")})}}else{a(y).append("<div class='btnseparator'></div>")}}a(v.tDiv).append(y);a(v.tDiv).append("<div style='clear:both'></div>");a(v.gDiv).prepend(v.tDiv)}v.hDiv.className="hDiv";a(q).before(v.hDiv);v.hTable.cellPadding=0;v.hTable.cellSpacing=0;a(v.hDiv).append('<div class="hDivBox"></div>');a("div",v.hDiv).append(v.hTable);var w=a("thead:first",q).get(0);if(w){a(v.hTable).append(w)}w=null;if(!r.colmodel){var o=0}a("thead tr:first th",v.hDiv).each(function(){var g=document.createElement("div");if(a(this).attr("abbr")){a(this).click(function(t){if(!a(this).hasClass("thOver")){return false}var p=(t.target||t.srcElement);if(p.href||p.type){return true}v.changeSort(this)});if(a(this).attr("abbr")==r.sortname){this.className="sorted";g.className="s"+r.sortorder}}if(this.hide){a(this).hide()}if(!r.colmodel&&!a(this).attr("isch")&&!a(this).attr("ispic")){a(this).attr("axis","col"+o++)}if(a(this).attr("ispic")){a(g).addClass("treegrid_row_link_head_pic_div")}a(g).css({textAlign:this.title_align,width:this.width+"px"});g.innerHTML=this.innerHTML;a(this).empty().append(g).removeAttr("width");if(!a(this).attr("isch")&&!a(this).attr("ispic")){a(this).mousedown(function(p){v.dragStart("colMove",p,this)}).hover(function(){if(!v.colresize&&!a(this).hasClass("thMove")&&!v.colCopy){a(this).addClass("thOver")}if(a(this).attr("abbr")!=r.sortname&&!v.colCopy&&!v.colresize&&a(this).attr("abbr")){a("div",this).addClass("s"+r.sortorder)}else{if(a(this).attr("abbr")==r.sortname&&!v.colCopy&&!v.colresize&&a(this).attr("abbr")){var H="";if(r.sortorder=="asc"){H="desc"}else{H="asc"}a("div",this).removeClass("s"+r.sortorder).addClass("s"+H)}}if(v.colCopy){var B=a("th",v.hDiv).index(this);if(B==v.dcoln){return false}if(B<v.dcoln){a(this).append(v.cdropleft)}else{a(this).append(v.cdropright)}v.dcolt=B}else{if(!v.colresize){var p=a("th:visible",v.hDiv);var G=-1;for(var E=0,D=0,C=p.length;E<C;E++){if(a(p[E]).css("display")!="none"){if(p[E]==this){G=D;break}D++}}var G=a("th:visible",v.hDiv).index(this);var t=parseInt(a("div:eq("+G+")",v.cDrag).css("left"));var F=parseInt(a(v.nBtn).width())+parseInt(a(v.nBtn).css("borderLeftWidth"));nl=t-F+Math.floor(r.cgwidth/2);a(v.nDiv).hide();a(v.nBtn).hide();a(v.nBtn).css({left:nl,top:v.hDiv.offsetTop}).show();var I=parseInt(a(v.nDiv).width());a(v.nDiv).css({top:v.bDiv.offsetTop});if((nl+I)>a(v.gDiv).width()){a(v.nDiv).css("left",t-I+1)}else{a(v.nDiv).css("left",nl)}if(a(this).hasClass("sorted")){a(v.nBtn).addClass("srtd")}else{a(v.nBtn).removeClass("srtd")}}}},function(){a(this).removeClass("thOver");if(a(this).attr("abbr")!=r.sortname){a("div",this).removeClass("s"+r.sortorder)}else{if(a(this).attr("abbr")==r.sortname){var p="";if(r.sortorder=="asc"){p="desc"}else{p="asc"}a("div",this).addClass("s"+r.sortorder).removeClass("s"+p)}}if(v.colCopy){a(v.cdropleft).remove();a(v.cdropright).remove();v.dcolt=null}})}});v.bDiv.className="bDiv";a(q).before(v.bDiv);a(v.bDiv).css({height:(r.height=="auto")?"auto":r.height+"px"}).scroll(function(g){v.scroll()}).append(q);if(r.height=="auto"){a("table",v.bDiv).addClass("autoht")}if(r.url==false||r.url==""){v.addCellProp();v.addRowProp()}var f=a("thead tr:first th:first",v.hDiv).get(0);if(f!=null){v.cDrag.className="cDrag";v.cdpad=0;v.cdpad+=(isNaN(parseInt(a("div",f).css("borderLeftWidth")))?0:parseInt(a("div",f).css("borderLeftWidth")));v.cdpad+=(isNaN(parseInt(a("div",f).css("borderRightWidth")))?0:parseInt(a("div",f).css("borderRightWidth")));v.cdpad+=(isNaN(parseInt(a("div",f).css("paddingLeft")))?0:parseInt(a("div",f).css("paddingLeft")));v.cdpad+=(isNaN(parseInt(a("div",f).css("paddingRight")))?0:parseInt(a("div",f).css("paddingRight")));v.cdpad+=(isNaN(parseInt(a(f).css("borderLeftWidth")))?0:parseInt(a(f).css("borderLeftWidth")));v.cdpad+=(isNaN(parseInt(a(f).css("borderRightWidth")))?0:parseInt(a(f).css("borderRightWidth")));v.cdpad+=(isNaN(parseInt(a(f).css("paddingLeft")))?0:parseInt(a(f).css("paddingLeft")));v.cdpad+=(isNaN(parseInt(a(f).css("paddingRight")))?0:parseInt(a(f).css("paddingRight")));a(v.bDiv).before(v.cDrag);var e=a(v.bDiv).height();var d=a(v.hDiv).height();a(v.cDrag).css({top:-d+"px"});a("thead tr:first th",v.hDiv).each(function(){var t=document.createElement("div");a(v.cDrag).append(t);if(!r.cgwidth){r.cgwidth=a(t).width()}var g=a(this).attr("isch");var p=a(this).attr("ispic");a(t).css({height:e+d});if(!g){a(t).mousedown(function(B){v.dragStart("colresize",B,this)})}v.fixHeight(a(v.gDiv).height());a(t).hover(function(){v.fixHeight();if(!g){a(this).addClass("dragging")}},function(){if(!v.colresize){a(this).removeClass("dragging")}})});v.rePosDrag()}if(r.striped){a("tbody tr[id^='"+r.table_id+"_row_']:odd",v.bDiv).addClass("erow")}if(r.resizable&&r.height!="auto"){v.vDiv.className="vGrip";a(v.vDiv).mousedown(function(g){v.dragStart("vresize",g)}).html("<span></span>");a(v.bDiv).after(v.vDiv)}if(r.resizable&&r.width!="auto"&&!r.nohresize){v.rDiv.className="hGrip";a(v.rDiv).mousedown(function(g){v.dragStart("vresize",g,true)}).html("<span></span>").css("height",a(v.gDiv).height());if(a.browser.msie&&a.browser.version<7){a(v.rDiv).hover(function(){a(this).addClass("hgOver")},function(){a(this).removeClass("hgOver")})}a(v.gDiv).append(v.rDiv)}v.doUsePager=function(){if(r.usepager){v.pDiv.className="pDiv";v.pDiv.innerHTML='<div class="pDiv2"></div>';a(v.bDiv).after(v.pDiv);var B='<div class="pGroup"><div class="pFirst pButton" title="\u8f6c\u5230\u7b2c\u4e00\u9875"><span></span></div><div class="pPrev pButton" title="\u8f6c\u5230\u4e0a\u4e00\u9875"><span></span></div> </div><div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">\u5f53\u524d\u7b2c <input type="text" size="1" value="1" />\u9875\uff0c\u603b\u9875\u6570 <span> 1 </span></span></div><div class="btnseparator"></div><div class="pGroup"> <div class="pNext pButton" title="\u8f6c\u5230\u4e0b\u4e00\u9875"><span></span></div><div class="pLast pButton" title="\u8f6c\u5230\u6700\u540e\u4e00\u9875"><span></span></div></div><div class="btnseparator"></div><div class="pGroup"> <div class="pReload pButton" title="\u5237\u65b0"><span></span></div> </div> <div class="btnseparator"></div><div class="pGroup"><span class="pPageStat"></span></div>';a("div",v.pDiv).html(B);a(".pReload",v.pDiv).click(function(){if(r.isSuccessSearch){v.changePage("reload")}});a(".pFirst",v.pDiv).click(function(){if(r.isSuccessSearch){v.changePage("first")}});a(".pPrev",v.pDiv).click(function(){if(r.isSuccessSearch){v.changePage("prev")}});a(".pNext",v.pDiv).click(function(){if(r.isSuccessSearch){v.changePage("next")}});a(".pLast",v.pDiv).click(function(){if(r.isSuccessSearch){v.changePage("last")}});a(".pcontrol input",v.pDiv).keydown(function(E){if(E.keyCode==13&&r.isSuccessSearch){v.changePage("input")}});if(a.browser.msie&&a.browser.version<7){a(".pButton",v.pDiv).hover(function(){a(this).addClass("pBtnOver")},function(){a(this).removeClass("pBtnOver")})}if(r.useRp){var t="";for(var p=0;p<r.rpOptions.length;p++){if(r.rp==r.rpOptions[p]){sel='selected="selected"'}else{sel=""}t+="<option value='"+r.rpOptions[p]+"' "+sel+" >"+r.rpOptions[p]+"&nbsp;&nbsp;</option>"}a(".pDiv2",v.pDiv).prepend("<div class='pGroup'>\u6bcf\u9875 <select name='rp'>"+t+"</select>\u6761</div> <div class='btnseparator'></div>");a("select",v.pDiv).change(function(){if(r.onRpChange){r.onRpChange(+this.value)}else{r.newp=1;r.rp=this.value;if(r.isSuccessSearch){v.changePage("change")}}})}if(r.searchitems){a(".pDiv2",v.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>");a(".pSearch",v.pDiv).click(function(){a(v.sDiv).slideToggle("fast",function(){a(".sDiv:visible input:first",v.gDiv).trigger("focus")})});v.sDiv.className="sDiv";sitems=r.searchitems;var g="";var D="Eq";for(var C=0;C<sitems.length;C++){if(r.qtype==""&&sitems[C].isdefault==true){r.qtype=sitems[C].name;sel='selected="selected"'}else{sel=""}if(sitems[C].operater=="Like"){D="Like"}else{D="Eq"}g+="<option value='"+sitems[C].name+"$"+D+"$"+C+"' "+sel+" >"+sitems[C].display+"&nbsp;&nbsp;</option>"}if(r.qtype==""){r.qtype=sitems[0].name}a(v.sDiv).append("<div class='sDiv2'>\u5feb\u901f\u68c0\u7d22\uff1a<input type='text' size='30' name='q' class='qsbox' /> <select name='qtype'>"+g+"</select> <input type='button' name='qclearbtn' value='\u6e05\u7a7a' /></div>");a("input[name=q],select[name=qtype]",v.sDiv).keydown(function(E){if(E.keyCode==13){v.doSearch()}});a("input[name=qclearbtn]",v.sDiv).click(function(){a("input[name=q]",v.sDiv).val("");r.query="";v.doSearch()});a(v.bDiv).after(v.sDiv)}}};v.doUsePager();a(v.pDiv,v.sDiv).append("<div style='clear:both'></div>");if(r.title){v.mDiv.className="mDiv";v.mDiv.innerHTML='<div class="ftitle">'+r.title+"</div>";a(v.gDiv).prepend(v.mDiv);if(r.showTableToggleBtn){a(v.mDiv).append('<div class="ptogtitle" title="Minimize/Maximize Table"><span></span></div>');a("div.ptogtitle",v.mDiv).click(function(){a(v.gDiv).toggleClass("hideBody");a(this).toggleClass("vsble")})}v.rePosDrag()}v.cdropleft=document.createElement("span");v.cdropright=document.createElement("span");var j=a("<div/>");j.addClass("loading");a(v.block).append(j);var x=a(v.bDiv).height();var z=v.bDiv.offsetTop;a(v.block).css({width:v.bDiv.style.width,height:x,position:"relative",marginBottom:(x*-1),zIndex:1,top:z,left:"0px"});a(v.block).fadeTo(0,r.blockOpacity);if(a("th",v.hDiv).length){v.nDiv.className="nDiv";v.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>";a(v.nDiv).css({marginBottom:(x*-1),display:"none",top:z}).noSelect();var k=0;a("th div",v.hDiv).each(function(){var p=a("th[axis='col"+k+"']",v.hDiv)[0];if(p==null){return}var t=a("input[type='checkbox']",this);if(t.length>0){t[0].onclick=v.checkAllOrNot;return}var B=a("input[type='hidden']",this);if(B.length>0){return}if(p.toggle==false||this.innerHTML==""){k++;return}var g='checked="checked"';if(p.style.display=="none"){g=""}a("tbody",v.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" '+g+' class="togCol noborder" value="'+k+'" /></td><td class="ndcol2">'+this.innerHTML+"</td></tr>");k++});if(a.browser.msie&&a.browser.version<7){a("tr",v.nDiv).hover(function(){a(this).addClass("ndcolover")},function(){a(this).removeClass("ndcolover")})}a("td.ndcol2",v.nDiv).click(function(){if(a("input:checked",v.nDiv).length<r.minColToggle&&a(this).prev().find("input")[0].checked){return false}return v.toggleCol(a(this).prev().find("input").val())});a("input.togCol",v.nDiv).click(function(){if(a("input:checked",v.nDiv).length<r.minColToggle&&this.checked==false){return false}a(this).parent().next().trigger("click")});a(v.gDiv).prepend(v.nDiv);a(v.nBtn).addClass("nBtn").html("<div></div>").click(function(){a(v.nDiv).toggle();return true});if(r.showToggleBtn){a(v.gDiv).prepend(v.nBtn)}}a(v.iDiv).addClass("iDiv").css({display:"none"});a(v.bDiv).append(v.iDiv);a(v.bDiv).hover(function(){a(v.nDiv).hide();a(v.nBtn).hide()},function(){if(v.multisel){v.multisel=false}});a(v.gDiv).hover(function(){},function(){a(v.nDiv).hide();a(v.nBtn).hide()});a(document).mousemove(function(g){v.dragMove(g)}).mouseup(function(g){v.dragEnd()}).hover(function(){},function(){v.dragEnd()});if(a.browser.msie&&a.browser.version<7){a(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",v.gDiv).css({width:"100%"});a(v.gDiv).addClass("ie6");if(r.width!="auto"){a(v.gDiv).addClass("ie6fullwidthbug")}}v.rePosDrag();v.fixHeight();q.p=r;q.grid=v;var A=a("#"+r.container_id).parents("table");if(A.length){var s=a(A[0]);if(!s.hasClass("grid_layout_style")){s.addClass("grid_layout_style")}}if(r.autoload){r.isSuccessSearch=true;v.populate()}v.xDiv=document.createElement("div");a(v.xDiv).css({width:"1px",height:"1px",left:a("#"+r.container_id).find(".hDivBox").width()+"px",position:"absolute"});a(v.xDiv).append(" ");a(v.xDiv).appendTo(a(v.bDiv));return q};var b=false;a(document).ready(function(){b=true});a.fn.createTreeGrid=function(c){return this.each(function(){if(!b){a(this).hide();var d=this;a(document).ready(function(){a.addTreeFlex(d,c)})}else{a.addTreeFlex(this,c)}})};a.fn.noSelect=function(c){if(c==null){prevent=true}else{prevent=c}if(prevent){return this.each(function(){if(a.browser.msie||a.browser.safari){a(this).bind("selectstart",function(){return false})}else{if(a.browser.mozilla){a(this).css("MozUserSelect","none");a("body").trigger("focus")}else{if(a.browser.opera){a(this).bind("mousedown",function(){return false})}else{a(this).attr("unselectable","on")}}}})}else{return this.each(function(){if(a.browser.msie||a.browser.safari){a(this).unbind("selectstart")}else{if(a.browser.mozilla){a(this).css("MozUserSelect","inherit")}else{if(a.browser.opera){a(this).unbind("mousedown")}else{a(this).removeAttr("unselectable","on")}}}})}}})(jQuery);var NLTreeTable=function(d){String.prototype.replaceAll=function(f,e){return this.replace(new RegExp(f,"gm"),e)};d=jQuery.extend({container_id:"",table_id:"",tableData:false,onChangePage:false,onAppendChild:false,height:200,sortname:"id",sortorder:"desc",width:"auto",linkPicColumnWidth:40,striped:false,novstripe:false,maskObject:false,minwidth:30,minheight:80,resizable:false,url:false,method:"POST",dataType:"json",errormsg:"\u6570\u636e\u8bf7\u6c42\u5931\u8d25!",usepager:true,nowrap:false,page:1,total:1,useRp:true,rp:10,rpOptions:[10,15,20,25,40,100],title:"\u6570\u636e\u5217\u8868",pagestat:"\u663e\u793a\u8bb0\u5f55\u4ece{from}\u5230{to}\uff0c\u603b\u6570 {total} \u6761",procmsg:"\u6b63\u5728\u5904\u7406\u6570\u636e\uff0c\u8bf7\u7a0d\u5019 ...",query:"",qtype:"",qop:"Eq",nomsg:"\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684\u8bb0\u5f55\u5b58\u5728",minColToggle:1,showToggleBtn:false,hideOnSubmit:true,showTableToggleBtn:false,autoload:false,blockOpacity:0.5,onToggleCol:false,onChangeSort:false,onSuccess:false,onSubmit:false,showcheckbox:false,rowhandler:false,onRowSelectedChangeClass:false,rowbinddata:true,extParam:[{}],successResultID:"1",showSuccessMsg:true,showErrorMsg:true,cbLinked:true,gridClass:"bbit-grid-tree",picOnMouseover:false,linkPicClass:false,openAll:false},d);d.striped=false;d.resizable=false;var c=25;c+=1;c+=1;if(d.title){c+=23}if(d.buttons){c+=26}if(d.usepager){c+=31}d.height=d.height-c;if(d.height<0){d.height=0}function b(){jQuery("#"+d.container_id).append('<table id="'+d.table_id+'" style="display:none"></table>')}b();var a=jQuery("#"+d.table_id).createTreeGrid(d);this.flexReload=function(e,f){return a.each(function(){if(a[0].grid){var g={newp:a[0].p.newp?a[0].p.newp:null,extParam:e?e:[{}]};if(f){g.tableData=f}a[0].grid.freshParam(g);a[0].grid.populate()}})};this.clearAllRows=function(){if(a[0].grid){a[0].grid.clearAllRows()}};this.flexResize=function(e,f){var g={};if(e){g.width=e}if(f){f=parseInt(f,10);g.height=f-c;if(g.height<0){g.height=0}}return a.each(function(){if(a[0].grid){jQuery.extend(a[0].p,g);a[0].grid.reSize()}})};this.flexOptions=function(e){return a.each(function(){if(a[0].grid){jQuery.extend(a[0].p,e)}})};this.GetOptions=function(){if(a[0].grid){return a[0].p}return null};this.getCheckedRows=function(){if(a[0].grid){return a[0].grid.getCheckedRows()}return[]};this.search=function(e,f){if(a[0].grid){var g={newp:a[0].p.newp?a[0].p.newp:null,extParam:e?e:[{}]};if(f){g.tableData=f}a[0].grid.freshParam(g);a[0].grid.populate()}};this.getRowData=function(e){if(a[0].grid){return a[0].grid.getRowData(e)}};this.getRowsData=function(){if(a[0].grid){return a[0].grid.getRowsData()}};this.cancelAllSelectState=function(){if(a[0].grid){a[0].grid.cancelAllSelectState()}};this.mask=function(){if(a[0].grid){a[0].grid.doMask("mask")}};this.unmask=function(){if(a[0].grid){a[0].grid.doMask("unmask")}};this.flexToggleCol=function(f,e){return a.each(function(){if(a[0].grid){a[0].grid.toggleCol(f,e)}})};this.flexAddData=function(e){return a.each(function(){if(a[0].grid){a[0].grid.addData(e)}})};this.appendChild=function(e,f){if(a[0].grid){if(f.parentId==undefined){f.parentId=a[0].grid.getParentId(f)}e=a[0].grid.changeJsonObject(e,f);a[0].grid.appendChild(e[0],f)}};this.stopPropagation=function(f){if(f&&f.stopPropagation){f.stopPropagation()}else{window.event.cancelBubble=true}};this.openRow=function(e){if(a[0].grid){a[0].grid.openRow(e)}};this.closeRow=function(e){if(a[0].grid){a[0].grid.closeRow(e)}};this.adjustOrder=function(e){if(a[0].grid){a[0].grid.adjustOrder(e)}};this.deleteRow=function(e){if(a[0].grid){a[0].grid.deleteRow(e)}};this.getAllData=function(e){if(a[0].grid){return a[0].grid.getAllData(e)}};this.updateRowData=function(e){if(a[0].grid){return a[0].grid.updateRowData(e)}};this.enabledButton=function(e){if(a[0].grid){a[0].grid.enabledButton(e)}};this.disabledButton=function(e){if(a[0].grid){a[0].grid.disabledButton(e)}}};
